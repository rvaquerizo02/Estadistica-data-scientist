<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 16 Modelización estadística. Conociendo los datos | Introducción a la Estadística para Científicos de Datos con R</title>
  <meta name="description" content="Libro de introducción a la estadística" />
  <meta name="generator" content="bookdown 0.28 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 16 Modelización estadística. Conociendo los datos | Introducción a la Estadística para Científicos de Datos con R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Libro de introducción a la estadística" />
  <meta name="github-repo" content="https://github.com/rvaquerizo02/Estadistica-data-scientist" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 16 Modelización estadística. Conociendo los datos | Introducción a la Estadística para Científicos de Datos con R" />
  
  <meta name="twitter:description" content="Libro de introducción a la estadística" />
  

<meta name="author" content="Raul Vaquerizo" />


<meta name="date" content="2023-05-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="modelos-GLM.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.24/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introducción a la Estadística para Científicos de Datos con R/a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introducción</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#objetivos"><i class="fa fa-check"></i><b>1.1</b> Objetivos</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#entorno-de-trabajo"><i class="fa fa-check"></i><b>1.2</b> Entorno de trabajo</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="datos.html"><a href="datos.html"><i class="fa fa-check"></i><b>2</b> Datos</a>
<ul>
<li class="chapter" data-level="2.1" data-path="datos.html"><a href="datos.html#qué-son-los-datos"><i class="fa fa-check"></i><b>2.1</b> Qué son los datos</a></li>
<li class="chapter" data-level="2.2" data-path="datos.html"><a href="datos.html#tipos-de-datos"><i class="fa fa-check"></i><b>2.2</b> Tipos de datos</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="datos.html"><a href="datos.html#datos-internos"><i class="fa fa-check"></i><b>2.2.1</b> Datos internos</a></li>
<li class="chapter" data-level="2.2.2" data-path="datos.html"><a href="datos.html#datos-externos"><i class="fa fa-check"></i><b>2.2.2</b> Datos externos:</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="datos.html"><a href="datos.html#almacenamiento-de-datos"><i class="fa fa-check"></i><b>2.3</b> Almacenamiento de datos</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="datos.html"><a href="datos.html#sistemas-operacionales"><i class="fa fa-check"></i><b>2.3.1</b> Sistemas operacionales</a></li>
<li class="chapter" data-level="2.3.2" data-path="datos.html"><a href="datos.html#sistemas-informacionales-tradicionales"><i class="fa fa-check"></i><b>2.3.2</b> Sistemas informacionales tradicionales</a></li>
<li class="chapter" data-level="2.3.3" data-path="datos.html"><a href="datos.html#data-lake"><i class="fa fa-check"></i><b>2.3.3</b> Data Lake</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="datos.html"><a href="datos.html#todo-es-álgebra-lineal"><i class="fa fa-check"></i><b>2.4</b> Todo es álgebra lineal</a></li>
<li class="chapter" data-level="2.5" data-path="datos.html"><a href="datos.html#como-se-disponen-los-datos"><i class="fa fa-check"></i><b>2.5</b> Como se disponen los datos</a></li>
<li class="chapter" data-level="2.6" data-path="datos.html"><a href="datos.html#tipos-de-variables"><i class="fa fa-check"></i><b>2.6</b> Tipos de Variables</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="datos.html"><a href="datos.html#variables-cuantitativas"><i class="fa fa-check"></i><b>2.6.1</b> Variables cuantitativas</a></li>
<li class="chapter" data-level="2.6.2" data-path="datos.html"><a href="datos.html#variables-cualitativas.-factores"><i class="fa fa-check"></i><b>2.6.2</b> Variables cualitativas. Factores</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="datos.html"><a href="datos.html#el-rol-de-las-variables-en-los-datos"><i class="fa fa-check"></i><b>2.7</b> El rol de las variables en los datos</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="manejo-de-datos-con-r.html"><a href="manejo-de-datos-con-r.html"><i class="fa fa-check"></i><b>3</b> Manejo de datos con R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="manejo-de-datos-con-r.html"><a href="manejo-de-datos-con-r.html#universo-tidyverse"><i class="fa fa-check"></i><b>3.1</b> Universo tidyverse</a></li>
<li class="chapter" data-level="3.2" data-path="manejo-de-datos-con-r.html"><a href="manejo-de-datos-con-r.html#selección-de-registros"><i class="fa fa-check"></i><b>3.2</b> Selección de registros</a></li>
<li class="chapter" data-level="3.3" data-path="manejo-de-datos-con-r.html"><a href="manejo-de-datos-con-r.html#selección-de-columnas"><i class="fa fa-check"></i><b>3.3</b> Selección de columnas</a></li>
<li class="chapter" data-level="3.4" data-path="manejo-de-datos-con-r.html"><a href="manejo-de-datos-con-r.html#creación-o-actualización-de-variables"><i class="fa fa-check"></i><b>3.4</b> Creación o actualización de variables</a></li>
<li class="chapter" data-level="3.5" data-path="manejo-de-datos-con-r.html"><a href="manejo-de-datos-con-r.html#ordenar-datos"><i class="fa fa-check"></i><b>3.5</b> Ordenar datos</a></li>
<li class="chapter" data-level="3.6" data-path="manejo-de-datos-con-r.html"><a href="manejo-de-datos-con-r.html#sumarizar-valores"><i class="fa fa-check"></i><b>3.6</b> Sumarizar valores</a></li>
<li class="chapter" data-level="3.7" data-path="manejo-de-datos-con-r.html"><a href="manejo-de-datos-con-r.html#combinación-de-acciones"><i class="fa fa-check"></i><b>3.7</b> Combinación de acciones</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="uniones-de-tablas-con-r.html"><a href="uniones-de-tablas-con-r.html"><i class="fa fa-check"></i><b>4</b> Uniones de tablas con R</a>
<ul>
<li class="chapter" data-level="4.1" data-path="uniones-de-tablas-con-r.html"><a href="uniones-de-tablas-con-r.html#uniones-verticales"><i class="fa fa-check"></i><b>4.1</b> Uniones verticales</a></li>
<li class="chapter" data-level="4.2" data-path="uniones-de-tablas-con-r.html"><a href="uniones-de-tablas-con-r.html#uniones-horizontales-o-join"><i class="fa fa-check"></i><b>4.2</b> Uniones horizontales o <em>join</em></a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="uniones-de-tablas-con-r.html"><a href="uniones-de-tablas-con-r.html#inner-join"><i class="fa fa-check"></i><b>4.2.1</b> Inner join</a></li>
<li class="chapter" data-level="4.2.2" data-path="uniones-de-tablas-con-r.html"><a href="uniones-de-tablas-con-r.html#left-join"><i class="fa fa-check"></i><b>4.2.2</b> Left join</a></li>
<li class="chapter" data-level="4.2.3" data-path="uniones-de-tablas-con-r.html"><a href="uniones-de-tablas-con-r.html#anti-join"><i class="fa fa-check"></i><b>4.2.3</b> Anti join</a></li>
<li class="chapter" data-level="4.2.4" data-path="uniones-de-tablas-con-r.html"><a href="uniones-de-tablas-con-r.html#librería-sqldf"><i class="fa fa-check"></i><b>4.2.4</b> Librería sqldf</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="uniones-de-tablas-con-r.html"><a href="uniones-de-tablas-con-r.html#duplicidades-en-las-uniones-de-tablas"><i class="fa fa-check"></i><b>4.3</b> Duplicidades en las uniones de tablas</a></li>
<li class="chapter" data-level="4.4" data-path="uniones-de-tablas-con-r.html"><a href="uniones-de-tablas-con-r.html#referencias"><i class="fa fa-check"></i><b>4.4</b> Referencias</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="basicos-ggplot.html"><a href="basicos-ggplot.html"><i class="fa fa-check"></i><b>5</b> Representación gráfica básica con ggplot</a>
<ul>
<li class="chapter" data-level="5.1" data-path="basicos-ggplot.html"><a href="basicos-ggplot.html#histogramas"><i class="fa fa-check"></i><b>5.1</b> Histogramas</a></li>
<li class="chapter" data-level="5.2" data-path="basicos-ggplot.html"><a href="basicos-ggplot.html#gráficos-de-densidad"><i class="fa fa-check"></i><b>5.2</b> Gráficos de densidad</a></li>
<li class="chapter" data-level="5.3" data-path="basicos-ggplot.html"><a href="basicos-ggplot.html#gráficos-de-caja-boxplot"><i class="fa fa-check"></i><b>5.3</b> Gráficos de caja (boxplot)</a></li>
<li class="chapter" data-level="5.4" data-path="basicos-ggplot.html"><a href="basicos-ggplot.html#gráficos-de-tarta"><i class="fa fa-check"></i><b>5.4</b> Gráficos de tarta</a></li>
<li class="chapter" data-level="5.5" data-path="basicos-ggplot.html"><a href="basicos-ggplot.html#gráficos-de-barras"><i class="fa fa-check"></i><b>5.5</b> Gráficos de barras</a></li>
<li class="chapter" data-level="5.6" data-path="basicos-ggplot.html"><a href="basicos-ggplot.html#gráficos-de-líneas"><i class="fa fa-check"></i><b>5.6</b> Gráficos de líneas</a></li>
<li class="chapter" data-level="5.7" data-path="basicos-ggplot.html"><a href="basicos-ggplot.html#gráfico-de-dispersión"><i class="fa fa-check"></i><b>5.7</b> Gráfico de dispersión</a></li>
<li class="chapter" data-level="5.8" data-path="basicos-ggplot.html"><a href="basicos-ggplot.html#múltiples-gráficos-con-gridextra"><i class="fa fa-check"></i><b>5.8</b> Múltiples gráficos con gridExtra</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="descripcion-numerica-variables.html"><a href="descripcion-numerica-variables.html"><i class="fa fa-check"></i><b>6</b> Descripción numérica de variables</a>
<ul>
<li class="chapter" data-level="6.1" data-path="descripcion-numerica-variables.html"><a href="descripcion-numerica-variables.html#transformar-datos-en-información"><i class="fa fa-check"></i><b>6.1</b> Transformar datos en información</a></li>
<li class="chapter" data-level="6.2" data-path="descripcion-numerica-variables.html"><a href="descripcion-numerica-variables.html#caso-práctico.-campaña-de-venta-cruzada"><i class="fa fa-check"></i><b>6.2</b> Caso práctico. Campaña de venta cruzada</a></li>
<li class="chapter" data-level="6.3" data-path="descripcion-numerica-variables.html"><a href="descripcion-numerica-variables.html#el-rol-de-las-variables-en-el-conjunto-de-datos"><i class="fa fa-check"></i><b>6.3</b> El rol de las variables en el conjunto de datos</a></li>
<li class="chapter" data-level="6.4" data-path="descripcion-numerica-variables.html"><a href="descripcion-numerica-variables.html#análisis-descriptivos-de-los-datos"><i class="fa fa-check"></i><b>6.4</b> Análisis descriptivos de los datos</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="descripcion-numerica-variables.html"><a href="descripcion-numerica-variables.html#descritivos-en-variables-cualitativas-factores"><i class="fa fa-check"></i><b>6.4.1</b> Descritivos en variables cualitativas (factores)</a></li>
<li class="chapter" data-level="6.4.2" data-path="descripcion-numerica-variables.html"><a href="descripcion-numerica-variables.html#descritivos-en-variables-cuantitativas"><i class="fa fa-check"></i><b>6.4.2</b> Descritivos en variables cuantitativas</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="descripcion-grafica-datos.html"><a href="descripcion-grafica-datos.html"><i class="fa fa-check"></i><b>7</b> Descripción gráfica de datos</a>
<ul>
<li class="chapter" data-level="7.1" data-path="descripcion-grafica-datos.html"><a href="descripcion-grafica-datos.html#descripción-gráfica-de-factores"><i class="fa fa-check"></i><b>7.1</b> Descripción gráfica de factores</a></li>
<li class="chapter" data-level="7.2" data-path="descripcion-grafica-datos.html"><a href="descripcion-grafica-datos.html#descripción-gráfica-de-variables-numéricas"><i class="fa fa-check"></i><b>7.2</b> Descripción gráfica de variables numéricas</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="problemas-datos.html"><a href="problemas-datos.html"><i class="fa fa-check"></i><b>8</b> Problemas con los datos</a>
<ul>
<li class="chapter" data-level="8.1" data-path="problemas-datos.html"><a href="problemas-datos.html#problemática-con-factores"><i class="fa fa-check"></i><b>8.1</b> Problemática con factores</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="problemas-datos.html"><a href="problemas-datos.html#factores-con-niveles-de-pocos-registros"><i class="fa fa-check"></i><b>8.1.1</b> Factores con niveles de pocos registros</a></li>
<li class="chapter" data-level="8.1.2" data-path="problemas-datos.html"><a href="problemas-datos.html#factores-que-aparecen-como-variables-numéricas"><i class="fa fa-check"></i><b>8.1.2</b> Factores que aparecen como variables numéricas</a></li>
<li class="chapter" data-level="8.1.3" data-path="problemas-datos.html"><a href="problemas-datos.html#factores-con-un-gran-número-de-niveles"><i class="fa fa-check"></i><b>8.1.3</b> Factores con un gran número de niveles</a></li>
<li class="chapter" data-level="8.1.4" data-path="problemas-datos.html"><a href="problemas-datos.html#factores-con-valores-perdidos"><i class="fa fa-check"></i><b>8.1.4</b> Factores con valores perdidos</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="problemas-datos.html"><a href="problemas-datos.html#problemas-con-variables-numéricas"><i class="fa fa-check"></i><b>8.2</b> Problemas con variables numéricas</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="problemas-datos.html"><a href="problemas-datos.html#valores-modales"><i class="fa fa-check"></i><b>8.2.1</b> Valores modales</a></li>
<li class="chapter" data-level="8.2.2" data-path="problemas-datos.html"><a href="problemas-datos.html#valores-atípicos"><i class="fa fa-check"></i><b>8.2.2</b> Valores atípicos</a></li>
<li class="chapter" data-level="8.2.3" data-path="problemas-datos.html"><a href="problemas-datos.html#variables-numéricas-como-factores"><i class="fa fa-check"></i><b>8.2.3</b> Variables numéricas como factores</a></li>
<li class="chapter" data-level="8.2.4" data-path="problemas-datos.html"><a href="problemas-datos.html#valores-perdidos-en-variables-numéricas"><i class="fa fa-check"></i><b>8.2.4</b> Valores perdidos en variables numéricas</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="analisis-exploratorio-datos-EDA.html"><a href="analisis-exploratorio-datos-EDA.html"><i class="fa fa-check"></i><b>9</b> Análisis Exploratorio de Datos. EDA</a></li>
<li class="chapter" data-level="10" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html"><i class="fa fa-check"></i><b>10</b> Probabilidad y distribuciones</a>
<ul>
<li class="chapter" data-level="10.1" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#conceptos-básicos-de-probabilidad"><i class="fa fa-check"></i><b>10.1</b> Conceptos básicos de probabilidad</a></li>
<li class="chapter" data-level="10.2" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#distribución-de-un-evento"><i class="fa fa-check"></i><b>10.2</b> Distribución de un evento</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#distribuciones-conocidas"><i class="fa fa-check"></i><b>10.2.1</b> Distribuciones conocidas</a></li>
<li class="chapter" data-level="10.2.2" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#obtención-de-probabilidades-con-r"><i class="fa fa-check"></i><b>10.2.2</b> Obtención de probabilidades con R</a></li>
<li class="chapter" data-level="10.2.3" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#generación-de-números-aleatorios-con-r"><i class="fa fa-check"></i><b>10.2.3</b> Generación de números aleatorios con R</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#distribuciones-discretas"><i class="fa fa-check"></i><b>10.3</b> Distribuciones discretas</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#distribución-de-bernoulli"><i class="fa fa-check"></i><b>10.3.1</b> Distribución de Bernoulli</a></li>
<li class="chapter" data-level="10.3.2" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#distribución-binomial"><i class="fa fa-check"></i><b>10.3.2</b> Distribución binomial</a></li>
<li class="chapter" data-level="10.3.3" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#distribución-de-poisson"><i class="fa fa-check"></i><b>10.3.3</b> Distribución de Poisson</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#distribuciones-continuas"><i class="fa fa-check"></i><b>10.4</b> Distribuciones continuas</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#distribución-uniforme"><i class="fa fa-check"></i><b>10.4.1</b> Distribución uniforme</a></li>
<li class="chapter" data-level="10.4.2" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#distribución-normal"><i class="fa fa-check"></i><b>10.4.2</b> Distribución normal</a></li>
<li class="chapter" data-level="10.4.3" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#distribución-gamma"><i class="fa fa-check"></i><b>10.4.3</b> Distribución gamma</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="analisis-bivariable.html"><a href="analisis-bivariable.html"><i class="fa fa-check"></i><b>11</b> Análisis bivariable</a>
<ul>
<li class="chapter" data-level="11.1" data-path="analisis-bivariable.html"><a href="analisis-bivariable.html#variable-numérica-frente-a-variable-numérica"><i class="fa fa-check"></i><b>11.1</b> Variable numérica frente a variable numérica</a></li>
<li class="chapter" data-level="11.2" data-path="analisis-bivariable.html"><a href="analisis-bivariable.html#factores-frente-a-variables-numéricas"><i class="fa fa-check"></i><b>11.2</b> Factores frente a variables numéricas</a></li>
<li class="chapter" data-level="11.3" data-path="analisis-bivariable.html"><a href="analisis-bivariable.html#factores-frente-a-factores"><i class="fa fa-check"></i><b>11.3</b> Factores frente a factores</a></li>
<li class="chapter" data-level="11.4" data-path="analisis-bivariable.html"><a href="analisis-bivariable.html#propuesta-de-análisis-gráfico-para-el-análisis-bivariable"><i class="fa fa-check"></i><b>11.4</b> Propuesta de análisis gráfico para el análisis bivariable</a></li>
<li class="chapter" data-level="11.5" data-path="analisis-bivariable.html"><a href="analisis-bivariable.html#correlación-entre-factores.-la-v-de-cramer"><i class="fa fa-check"></i><b>11.5</b> Correlación entre factores. La V de Cramer</a></li>
<li class="chapter" data-level="11.6" data-path="analisis-bivariable.html"><a href="analisis-bivariable.html#agrupación-de-variables-cuantitativas"><i class="fa fa-check"></i><b>11.6</b> Agrupación de variables cuantitativas</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="muestreo-inferencia.html"><a href="muestreo-inferencia.html"><i class="fa fa-check"></i><b>12</b> Muestreo e inferencia estadística</a>
<ul>
<li class="chapter" data-level="12.1" data-path="muestreo-inferencia.html"><a href="muestreo-inferencia.html#muestreo"><i class="fa fa-check"></i><b>12.1</b> Muestreo</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="muestreo-inferencia.html"><a href="muestreo-inferencia.html#muestreo-aleatorio-simple"><i class="fa fa-check"></i><b>12.1.1</b> Muestreo aleatorio simple</a></li>
<li class="chapter" data-level="12.1.2" data-path="muestreo-inferencia.html"><a href="muestreo-inferencia.html#muestreo-aleatorio-estratificado"><i class="fa fa-check"></i><b>12.1.2</b> Muestreo aleatorio estratificado</a></li>
<li class="chapter" data-level="12.1.3" data-path="muestreo-inferencia.html"><a href="muestreo-inferencia.html#muestreo-por-conglomerados"><i class="fa fa-check"></i><b>12.1.3</b> Muestreo por conglomerados</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="muestreo-inferencia.html"><a href="muestreo-inferencia.html#inferencia-estadística"><i class="fa fa-check"></i><b>12.2</b> Inferencia estadística</a></li>
<li class="chapter" data-level="12.3" data-path="muestreo-inferencia.html"><a href="muestreo-inferencia.html#estimación-de-parámetros"><i class="fa fa-check"></i><b>12.3</b> Estimación de parámetros</a></li>
<li class="chapter" data-level="12.4" data-path="muestreo-inferencia.html"><a href="muestreo-inferencia.html#intervalos-de-confianza"><i class="fa fa-check"></i><b>12.4</b> Intervalos de confianza</a></li>
<li class="chapter" data-level="12.5" data-path="muestreo-inferencia.html"><a href="muestreo-inferencia.html#contrastes-de-hipótesis"><i class="fa fa-check"></i><b>12.5</b> Contrastes de hipótesis</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="regresion-lineal.html"><a href="regresion-lineal.html"><i class="fa fa-check"></i><b>13</b> Regresión lineal</a>
<ul>
<li class="chapter" data-level="13.1" data-path="regresion-lineal.html"><a href="regresion-lineal.html#modelo-de-regresión-lineal-simple"><i class="fa fa-check"></i><b>13.1</b> Modelo de regresión lineal simple</a></li>
<li class="chapter" data-level="13.2" data-path="regresion-lineal.html"><a href="regresion-lineal.html#el-coeficiente-de-determinación-o-r2"><i class="fa fa-check"></i><b>13.2</b> El coeficiente de determinación o <span class="math inline">\(R^2\)</span></a></li>
<li class="chapter" data-level="13.3" data-path="regresion-lineal.html"><a href="regresion-lineal.html#transformaciones-de-variables"><i class="fa fa-check"></i><b>13.3</b> Transformaciones de variables</a></li>
<li class="chapter" data-level="13.4" data-path="regresion-lineal.html"><a href="regresion-lineal.html#tramificación-de-variables-en-modelos-lineales"><i class="fa fa-check"></i><b>13.4</b> Tramificación de variables en modelos lineales</a></li>
<li class="chapter" data-level="13.5" data-path="regresion-lineal.html"><a href="regresion-lineal.html#factores-en-modelos-de-regresión"><i class="fa fa-check"></i><b>13.5</b> Factores en modelos de regresión</a></li>
<li class="chapter" data-level="13.6" data-path="regresion-lineal.html"><a href="regresion-lineal.html#modelo-de-regresión-lineal-múltiple"><i class="fa fa-check"></i><b>13.6</b> Modelo de regresión lineal múltiple</a></li>
<li class="chapter" data-level="13.7" data-path="regresion-lineal.html"><a href="regresion-lineal.html#métodos-de-selección-de-variables"><i class="fa fa-check"></i><b>13.7</b> Métodos de selección de variables</a>
<ul>
<li class="chapter" data-level="13.7.1" data-path="regresion-lineal.html"><a href="regresion-lineal.html#método-fordward"><i class="fa fa-check"></i><b>13.7.1</b> Método fordward</a></li>
<li class="chapter" data-level="13.7.2" data-path="regresion-lineal.html"><a href="regresion-lineal.html#método-backward"><i class="fa fa-check"></i><b>13.7.2</b> Método backward</a></li>
<li class="chapter" data-level="13.7.3" data-path="regresion-lineal.html"><a href="regresion-lineal.html#método-stepwise"><i class="fa fa-check"></i><b>13.7.3</b> Método stepwise</a></li>
</ul></li>
<li class="chapter" data-level="13.8" data-path="regresion-lineal.html"><a href="regresion-lineal.html#el-principio-de-parsimonia"><i class="fa fa-check"></i><b>13.8</b> El principio de parsimonia</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="introduccion-diseno-experimentos.html"><a href="introduccion-diseno-experimentos.html"><i class="fa fa-check"></i><b>14</b> Introducción al diseño de experimentos</a>
<ul>
<li class="chapter" data-level="14.1" data-path="introduccion-diseno-experimentos.html"><a href="introduccion-diseno-experimentos.html#fundamentos-del-diseño-experimental"><i class="fa fa-check"></i><b>14.1</b> Fundamentos del diseño experimental</a></li>
<li class="chapter" data-level="14.2" data-path="introduccion-diseno-experimentos.html"><a href="introduccion-diseno-experimentos.html#fuentes-de-variabilidad"><i class="fa fa-check"></i><b>14.2</b> Fuentes de variabilidad</a></li>
<li class="chapter" data-level="14.3" data-path="introduccion-diseno-experimentos.html"><a href="introduccion-diseno-experimentos.html#planificación"><i class="fa fa-check"></i><b>14.3</b> Planificación</a></li>
<li class="chapter" data-level="14.4" data-path="introduccion-diseno-experimentos.html"><a href="introduccion-diseno-experimentos.html#bloquear-y-aleatorizar-factores"><i class="fa fa-check"></i><b>14.4</b> Bloquear y aleatorizar factores</a></li>
<li class="chapter" data-level="14.5" data-path="introduccion-diseno-experimentos.html"><a href="introduccion-diseno-experimentos.html#diseños-factoriales"><i class="fa fa-check"></i><b>14.5</b> Diseños factoriales</a>
<ul>
<li class="chapter" data-level="14.5.1" data-path="introduccion-diseno-experimentos.html"><a href="introduccion-diseno-experimentos.html#modelo-unifactorial.-ab-testing"><i class="fa fa-check"></i><b>14.5.1</b> Modelo unifactorial. A/B testing</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="introduccion-diseno-experimentos.html"><a href="introduccion-diseno-experimentos.html#modelos-bifactoriales.-interacciones-entre-variables"><i class="fa fa-check"></i><b>14.6</b> Modelos bifactoriales. Interacciones entre variables</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="modelos-GLM.html"><a href="modelos-GLM.html"><i class="fa fa-check"></i><b>15</b> Modelos GLM. Regresión logística y regresión de poisson</a>
<ul>
<li class="chapter" data-level="15.1" data-path="modelos-GLM.html"><a href="modelos-GLM.html#motivación-de-los-modelos-glm"><i class="fa fa-check"></i><b>15.1</b> Motivación de los modelos GLM</a></li>
<li class="chapter" data-level="15.2" data-path="modelos-GLM.html"><a href="modelos-GLM.html#la-función-de-enlace-en-los-modelos-glm"><i class="fa fa-check"></i><b>15.2</b> La función de enlace en los modelos GLM</a></li>
<li class="chapter" data-level="15.3" data-path="modelos-GLM.html"><a href="modelos-GLM.html#regresión-logística"><i class="fa fa-check"></i><b>15.3</b> Regresión logística</a></li>
<li class="chapter" data-level="15.4" data-path="modelos-GLM.html"><a href="modelos-GLM.html#regresión-de-poisson"><i class="fa fa-check"></i><b>15.4</b> Regresión de poisson</a></li>
<li class="chapter" data-level="15.5" data-path="modelos-GLM.html"><a href="modelos-GLM.html#los-glm-y-el-concepto-microsegmento"><i class="fa fa-check"></i><b>15.5</b> Los GLM y el concepto microsegmento</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="modelizacion-estadistica.html"><a href="modelizacion-estadistica.html"><i class="fa fa-check"></i><b>16</b> Modelización estadística. Conociendo los datos</a>
<ul>
<li class="chapter" data-level="16.1" data-path="modelizacion-estadistica.html"><a href="modelizacion-estadistica.html#establecer-un-método-para-la-modelización-estadística"><i class="fa fa-check"></i><b>16.1</b> Establecer un método para la modelización estadística</a></li>
<li class="chapter" data-level="16.2" data-path="modelizacion-estadistica.html"><a href="modelizacion-estadistica.html#un-método-de-modelización-estadística"><i class="fa fa-check"></i><b>16.2</b> Un método de modelización estadística</a></li>
<li class="chapter" data-level="16.3" data-path="modelizacion-estadistica.html"><a href="modelizacion-estadistica.html#conocimiento-de-los-datos"><i class="fa fa-check"></i><b>16.3</b> Conocimiento de los datos</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="modelizacion-estadistica.html"><a href="modelizacion-estadistica.html#muestreo.-datos-de-entrenamiento-datos-de-validación-datos-de-test-y-prueba-ciega."><i class="fa fa-check"></i><b>16.3.1</b> Muestreo. Datos de entrenamiento, datos de validación, datos de test y prueba ciega.</a></li>
<li class="chapter" data-level="16.3.2" data-path="modelizacion-estadistica.html"><a href="modelizacion-estadistica.html#aproximación-inicial-a-los-datos"><i class="fa fa-check"></i><b>16.3.2</b> Aproximación inicial a los datos</a></li>
<li class="chapter" data-level="16.3.3" data-path="modelizacion-estadistica.html"><a href="modelizacion-estadistica.html#clasificación-de-factores"><i class="fa fa-check"></i><b>16.3.3</b> Clasificación de factores</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="modelizacion-estadistica.html"><a href="modelizacion-estadistica.html#el-código-de-reclasificación-de-factores"><i class="fa fa-check"></i><b>16.4</b> El código de reclasificación de factores</a></li>
<li class="chapter" data-level="16.5" data-path="modelizacion-estadistica.html"><a href="modelizacion-estadistica.html#análisis-de-interacciones"><i class="fa fa-check"></i><b>16.5</b> Análisis de interacciones</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introducción a la Estadística para Científicos de Datos con R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="modelizacion-estadistica" class="section level1 hasAnchor" number="16">
<h1><span class="header-section-number">Capítulo 16</span> Modelización estadística. Conociendo los datos<a href="modelizacion-estadistica.html#modelizacion-estadistica" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="establecer-un-método-para-la-modelización-estadística" class="section level2 hasAnchor" number="16.1">
<h2><span class="header-section-number">16.1</span> Establecer un método para la modelización estadística<a href="modelizacion-estadistica.html#establecer-un-método-para-la-modelización-estadística" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>En el capítulo 3 del ensayo se hacía mención al <a href="https://www.tidyverse.org/" target=_blank>universo tidyverse</a> y las librerías de R que englobaba, además de esas librerías hay una publicación de Hadley Wickham y Garret Grolemund <a href="https://r4ds.had.co.nz/" target="_blank">R for data sience</a> donde aparece la siguiente imagen:</p>
<p><img src="https://d33wubrfki0l68.cloudfront.net/571b056757d68e6df81a3e3853f54d3c76ad6efc/32d37/diagrams/data-science.png" /></p>
<p>Esa imagen describe un método para realizar <em>ciencia de datos</em> con R. Como en la anterior figura, este capítulo se dedicará a describir e ilustrar un método de modelización que recoge todo lo trabajado con anterioridad en el ensayo, para ello se emplea el ejemplo que ha servido de hilo conductor en otros capítulos. El ya conocido <strong>modelo de venta cruzada en el sector asegurador</strong>:</p>
<blockquote>
<p>Las compañías de seguros que operan en múltiples ramos tienen en sus propios clientes potenciales a los que ofrecer seguros de otro ramo. Esta estrategia no es solo beneficiosa para ganar clientes, también es importante para fidelizar e incluso a la hora de seleccionar riesgos. Si un cliente tiene asegurados dos vehículos en la compañía es de suponer que sólo está conduciendo uno de ellos. Por estos motivos un cliente integral en una compañía de seguros aporta más valor.</p>
</blockquote>
<p>A continuación se trabaja con un ejemplo de clientes de una compañía aseguradora que están en el ramo de Salud, la compañía pretende comercializar entre estos clientes su seguro de automóviles y para ello realizó una encuesta y etiquetó a aquellos clientes que estarían interesados en el seguro de automóviles. Los datos empleados para este trabajo se pueden obtener en <a href="https://www.kaggle.com/datasets/anmolkumar/health-insurance-cross-sell-prediction" target="_blank">este link</a> ya que corresponden a una competición de kaggle. Como se indica en la propia competición:</p>
<blockquote>
<p>El cliente es una compañía de seguros que ofrece seguros médicos, ahora ellos realizan un test para construir un modelo que permita predecir si los asegurados (clientes) del año pasado también estarán interesados en el seguro para vehículos provisto por la compañía.</p>
</blockquote>
<p>El científico de datos tiene que tener muy claro el objetivo de su trabajo de modelización. Con los datos que provienen de las encuestas es necesario realizar un modelo que permita seleccionar y caracterizar clientes para futuras campañas comerciales. Una vez se tiene claro el objetivo puede dar comienzo el trabajo de modelización.</p>
</div>
<div id="un-método-de-modelización-estadística" class="section level2 hasAnchor" number="16.2">
<h2><span class="header-section-number">16.2</span> Un método de modelización estadística<a href="modelizacion-estadistica.html#un-método-de-modelización-estadística" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Cada profesional ha de diseñar su propio método o seguir el que se utilice en el equipo con el que trabaje, en este ensayo se muestra un método probado en múltiples proyectos de ciencia de datos y que resume todo lo trabajado en capítulos anteriores:</p>
<p><img src="imagenes/metodo_modelizacion.png" /></p>
<p>Selección de datos, aproximación a los datos y análisis gráficos descriptivos para comenzar a describir el problema. El estudio de las principales características de la variable dependiente, creación de los factores que han de describirla y finalmente la modelización estadística.</p>
</div>
<div id="conocimiento-de-los-datos" class="section level2 hasAnchor" number="16.3">
<h2><span class="header-section-number">16.3</span> Conocimiento de los datos<a href="modelizacion-estadistica.html#conocimiento-de-los-datos" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Antes de empezar es necesario disponer del data frame de trabajo. Proceso ya conocido.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="modelizacion-estadistica.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="modelizacion-estadistica.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb1-3"><a href="modelizacion-estadistica.html#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="modelizacion-estadistica.html#cb1-4" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./data/train.csv&quot;</span>)</span>
<span id="cb1-5"><a href="modelizacion-estadistica.html#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(<span class="fu">head</span>(train,<span class="dv">5</span>))</span></code></pre></div>
<div id="htmlwidget-8c509cb146f06b8b2d74" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-8c509cb146f06b8b2d74">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5"],[1,2,3,4,5],["Male","Male","Male","Male","Female"],[44,76,47,21,29],[1,1,1,1,1],[28,3,28,11,41],[0,0,0,1,1],["&gt; 2 Years","1-2 Year","&gt; 2 Years","&lt; 1 Year","&lt; 1 Year"],["Yes","No","Yes","No","No"],[40454,33536,38294,28619,27496],[26,26,26,152,152],[217,183,27,203,39],[1,0,1,0,0]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>id<\/th>\n      <th>Gender<\/th>\n      <th>Age<\/th>\n      <th>Driving_License<\/th>\n      <th>Region_Code<\/th>\n      <th>Previously_Insured<\/th>\n      <th>Vehicle_Age<\/th>\n      <th>Vehicle_Damage<\/th>\n      <th>Annual_Premium<\/th>\n      <th>Policy_Sales_Channel<\/th>\n      <th>Vintage<\/th>\n      <th>Response<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,3,4,5,6,9,10,11,12]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>Este paso es fundamental y puede ser uno de los más complicados, <strong>disponer de los datos necesarios</strong>, no es el objetivo de este trabajo pero es necesario asegurar con los equipos técnicos y con los ingenieros de datos que la base de partida tiene la estructura necesaria para la modelización. Aunque sea a alto nivel se puede intuir que el científico de datos tiene que tener buena comunicación tanto con los equipos de tecnología como con los equipos de negocio ya que unos son el origen y otros son los usuarios finales del conocimiento extraído a los datos. Una vez se disponga de la tabla inicial puede dar comienzo el trabajo de modelización.</p>
<div id="muestreo.-datos-de-entrenamiento-datos-de-validación-datos-de-test-y-prueba-ciega." class="section level3 hasAnchor" number="16.3.1">
<h3><span class="header-section-number">16.3.1</span> Muestreo. Datos de entrenamiento, datos de validación, datos de test y prueba ciega.<a href="modelizacion-estadistica.html#muestreo.-datos-de-entrenamiento-datos-de-validación-datos-de-test-y-prueba-ciega." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Para comprobar el correcto funcionamiento de los modelos es necesario separar los datos en distintos subconjuntos que permitan medir no sólo la capacidad predictiva del modelo, también velar que el modelo no se exceda en la complejidad de los parámetros y que éstos puedan servir sólo para el conjunto de datos de entrenamiento. En un proceso de modelización pueden participar los siguientes conjuntos de datos.</p>
<p><img src="imagenes/entrenamiento_validacion_test.png" /></p>
<ul>
<li><p>Conjunto de datos de partida o universo. Es el conjunto inicial con datos no necesariamente depurados pero con la estructura e información necesaria para realizar un modelo, en el caso que ocupa se tratan de registros a nivel de cliente sobre los que se desea realizar una clasificación binomial que determine que clientes están interesados en el seguro de automóviles.</p></li>
<li><p>Conjunto de datos de entrenamiento. Son los datos que se van a emplear para modelizar, como aparece en la figura anterior en ocasiones se <em>balanceará</em> la muestra para incrementar el número de 1’s en los datos de forma que el modelo sea capaz de encontrar segmentos e indicios que permitan separar el azar de lo estadísticamente explicable. No hay un porcentaje mínimo de 1’s que indiquen la necesidad de balancear la muestra pero porcentajes por debajo del 5% pueden suponer un problema para una regresión logística (por ejemplo).</p></li>
</ul>
<blockquote>
<p>Si un conjunto de datos tiene un 3% de 1s, de casos positivos, el modelo puede tender a etiquetar todo 0s ya que acertará en un 97% de las ocasiones y no se consideraría un mal modelo aunque no sirva para nada.</p>
</blockquote>
<ul>
<li><p>Conjunto de datos de validación. Para evitar el <em>overfitting</em> o la <em>sobreparametrización</em> se separa un conjunto de datos con las mismas características que el conjunto de datos de entrenamiento y se comprueba si el modelo está aprendiendo sólo de los datos de entrenamiento. Hay técnicas estadísticas que no adolecen de esta problemática pero es buena práctica validar el modelo.</p></li>
<li><p>Conjunto de datos de test. Es un conjunto de datos que tiene exactamente las mismas características que el conjunto de datos de partida, se deshacen los posibles balanceos y tiene las mismas proporciones de 1’s que el universo. Sobre él se estudiará el comportamiento del modelo que finalmente seleccione el analista. En el caso de no realizar balanceo en la muestra se puede prescindir del conjunto de datos de validación y que los datos de test directamente hagan el rol de validación y test.</p></li>
<li><p>Prueba ciega. No aparece en la figura, no todos los científicos de datos emplean esta prueba. Se trata de un conjunto de datos que no ha participado en ninguna parte del proceso de modelización pero que supondrá la prueba final para el modelo. Es habitual cuando se trabaja con “cosechas” de datos, conjuntos de datos particionados por periodos temporales, habitualmente meses, donde el último mes disponible puede hacer este rol. De este modo se puede medir con los datos más recientes si el modelo cumple su cometido. Es un buen método para medir la capacidad predictiva del modelo en los equipos de negocio.</p></li>
</ul>
<p>Las proporciones de observaciones para cada uno de los conjuntos de datos la marcará el propio científico de datos. En el ejemplo de trabajo no se dispone de prueba ciega aunque revisando la competición de Kaggle se puede identificar un conjunto de datos que realice ese rol. Se dispone del data frame de partida, <em>train</em>, que se va a dividir en el conjunto de datos de entrenamiento y de test, se prescinde el uso de validación ya que no se realizará un balanceo de la muestra puesto que se tiene un % de unos por encima del 10%.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="modelizacion-estadistica.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(train<span class="sc">$</span>Response)<span class="sc">/</span><span class="fu">nrow</span>(train)</span></code></pre></div>
<pre><code>## [1] 0.1225634</code></pre>
<p>Se comienza inicialmente con el proceso de muestreo ya que es recomendable emplear menos observaciones en las fases descriptivas porque requieren un alto tiempo de computación y de interacción con los datos. En esta primera fase se divide <em>train</em> al 50%.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="modelizacion-estadistica.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">45</span>)</span>
<span id="cb4-2"><a href="modelizacion-estadistica.html#cb4-2" aria-hidden="true" tabindex="-1"></a>indices <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(train)) , <span class="fu">round</span>(<span class="fu">nrow</span>(train) <span class="sc">*</span> <span class="fl">0.50</span>))</span>
<span id="cb4-3"><a href="modelizacion-estadistica.html#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="modelizacion-estadistica.html#cb4-4" aria-hidden="true" tabindex="-1"></a>entrenamiento <span class="ot">&lt;-</span> train[indices,]; <span class="fu">nrow</span>(entrenamiento)<span class="sc">/</span><span class="fu">nrow</span>(train)</span></code></pre></div>
<pre><code>## [1] 0.4999987</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="modelizacion-estadistica.html#cb6-1" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> train[<span class="sc">-</span>indices,]; <span class="fu">nrow</span>(test)<span class="sc">/</span><span class="fu">nrow</span>(train)</span></code></pre></div>
<pre><code>## [1] 0.5000013</code></pre>
<p>Se ha dividido <em>train</em> en <em>entrenamiento</em> y <em>test</em> al 50% y sobre <em>entrenamiento</em> dan comienzo las primeras aproximaciones a los datos.</p>
</div>
<div id="aproximación-inicial-a-los-datos" class="section level3 hasAnchor" number="16.3.2">
<h3><span class="header-section-number">16.3.2</span> Aproximación inicial a los datos<a href="modelizacion-estadistica.html#aproximación-inicial-a-los-datos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>El primer paso es determinar el rol que juega cada variable dentro del conjunto de datos para definir los primeros análisis.</p>
<ul>
<li><code>Id</code> es el campo identificativo del cliente, no debe participar en el proceso de modelización</li>
<li><code>Response</code> es la variable respuesta, será el target</li>
<li>Resto de variables. Variables input, variables de entrada que deben describir el comportamiento de <code>Response</code></li>
</ul>
<p>La proporción de <code>Response</code> en <em>entrenamiento</em> es la siguiente:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="modelizacion-estadistica.html#cb8-1" aria-hidden="true" tabindex="-1"></a>entrenamiento <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Response) <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="modelizacion-estadistica.html#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">pct_interesados =</span> <span class="fu">round</span>(<span class="fu">sum</span>(Response)<span class="sc">/</span><span class="fu">nrow</span>(entrenamiento),<span class="dv">4</span>))</span></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   Response pct_interesados
##      &lt;int&gt;           &lt;dbl&gt;
## 1        0           0    
## 2        1           0.121</code></pre>
<p>A partir de este momento el trabajo del científico de datos será identificar características en las variables input que hagan variar en mayor medida ese 12.1% de clientes interesados y reunir todas esas características en una estructura algebraica que se denomina modelo.</p>
<p>Como se indicó en capítulos anteriores todo debe dar comienzo con el análisis EDA y por ello es necesario retomar el uso de de la librería <code>DataExplorer</code> y, sin lanzar el análisis EDA al completo, obtener una serie de gráficos ya conocidos.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="modelizacion-estadistica.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DataExplorer)</span>
<span id="cb10-2"><a href="modelizacion-estadistica.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">introduce</span>(entrenamiento)</span></code></pre></div>
<pre><code>##     rows columns discrete_columns continuous_columns all_missing_columns
## 1 190554      12                3                  9                   0
##   total_missing_values complete_rows total_observations memory_usage
## 1                    0        190554            2286648     13723768</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="modelizacion-estadistica.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_missing</span>(entrenamiento)</span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="modelizacion-estadistica.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_histogram</span>(entrenamiento, <span class="at">ncol =</span> <span class="dv">3</span>)</span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-5-2.png" width="672" /></p>
<p>Comprobado que no hay valores perdidos se empieza graficando los histogramas de las variables cuantitativas presentes en los datos y aparecen problemas conocidos. Tanto el campo <code>Id</code> como <code>Vintage</code> parecen ser completamente aleatorios por la forma de su histograma, es normal con un campo identificativo pero es algo a tener en cuenta con la variable que define la antigüedad del cliente. Por otro lado, <code>Policy_Sales_Channel</code> y <code>Region_Code</code> son variables categóricas y aparecen como variables numéricas. Este tipo de situaciones sólo se identifican si se conocen los datos y de nuevo se reitera la necesidad de que el científico de datos se involucre tanto con el problema de negocio y como con los equipos técnicos encargados de elaborar los datos, no se pueden hacer medias de sexo ni contabilizar saldos en fondos de inversión, cada variable tiene su propio análisis como se ha reiterado a lo largo de todo el ensayo.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="modelizacion-estadistica.html#cb14-1" aria-hidden="true" tabindex="-1"></a>entrenamiento <span class="ot">&lt;-</span> entrenamiento <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb14-2"><a href="modelizacion-estadistica.html#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Policy_Sales_Channel =</span> <span class="fu">as.factor</span>(Policy_Sales_Channel),</span>
<span id="cb14-3"><a href="modelizacion-estadistica.html#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Region_Code =</span> <span class="fu">as.factor</span>(Region_Code))</span></code></pre></div>
<p>Ahora se está en disposición de estudiar los factores disponibles en el conjunto de datos.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="modelizacion-estadistica.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_bar</span>(entrenamiento, <span class="at">ncol=</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## 2 columns ignored with more than 50 categories.
## Region_Code: 53 categories
## Policy_Sales_Channel: 150 categories</code></pre>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>Directamente se obtiene un mensaje que identifica otro problema, precisamente las variables que se han transformado en factores tienen un gran número de niveles, será necesario realizar un trabajo de agrupación de niveles que se hará con posterioridad. Otro de los problemas que apareció en capítulos anteriores se encuentra en la variable <code>Driving License</code> que sólo toma el valor 1, este hecho tiene todo el sentido, ya que solo se debe ofrecer un seguro de automóviles a aquel cliente que dispone de licencia de conducción. Esta variable será eliminada del proceso porque tiene una justificación desde el punto de vista de negocio.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="modelizacion-estadistica.html#cb17-1" aria-hidden="true" tabindex="-1"></a>entrenamiento <span class="ot">&lt;-</span> entrenamiento <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Driving_License)</span></code></pre></div>
</div>
<div id="clasificación-de-factores" class="section level3 hasAnchor" number="16.3.3">
<h3><span class="header-section-number">16.3.3</span> Clasificación de factores<a href="modelizacion-estadistica.html#clasificación-de-factores" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>En las aproximaciones iniciales se han realizado las principales depuraciones de datos, pero no es un proceso acabado, las siguientes iteraciones en el proceso de modelización continuarán con esa labor de depuración. Sin embargo, a partir de ahora el científico de datos ya introduce “su problema” en los análisis. Cuando se tiene una variable target y una variable que ayude a describir ese target se está realizando análisis bivariable como se trabajó en el capítulo 11. En aquel momento se planteó un análisis descriptivo de esta forma:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="modelizacion-estadistica.html#cb18-1" aria-hidden="true" tabindex="-1"></a>bivariable <span class="ot">&lt;-</span> <span class="cf">function</span>(df, target, varib, <span class="at">ajuste=</span><span class="dv">1</span>){</span>
<span id="cb18-2"><a href="modelizacion-estadistica.html#cb18-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-3"><a href="modelizacion-estadistica.html#cb18-3" aria-hidden="true" tabindex="-1"></a>target <span class="ot">=</span> <span class="fu">as.symbol</span>(target)</span>
<span id="cb18-4"><a href="modelizacion-estadistica.html#cb18-4" aria-hidden="true" tabindex="-1"></a>fr_analisis <span class="ot">=</span> <span class="fu">as.symbol</span>(varib)</span>
<span id="cb18-5"><a href="modelizacion-estadistica.html#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="modelizacion-estadistica.html#cb18-6" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb18-7"><a href="modelizacion-estadistica.html#cb18-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(<span class="at">factor_analisis =</span> <span class="fu">as.factor</span>(<span class="sc">!!</span>fr_analisis)) <span class="sc">%&gt;%</span></span>
<span id="cb18-8"><a href="modelizacion-estadistica.html#cb18-8" aria-hidden="true" tabindex="-1"></a>   <span class="fu">summarise</span>(<span class="at">pct_clientes =</span> <span class="fu">round</span>(<span class="fu">n</span>()<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fu">nrow</span>(df),<span class="dv">1</span>),</span>
<span id="cb18-9"><a href="modelizacion-estadistica.html#cb18-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">pct_interesados =</span> <span class="fu">round</span>(<span class="fu">sum</span>(<span class="sc">!!</span>target)<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fu">n</span>(),<span class="dv">1</span>), <span class="at">.groups=</span><span class="st">&#39;drop&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb18-10"><a href="modelizacion-estadistica.html#cb18-10" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>factor_analisis)) <span class="sc">+</span></span>
<span id="cb18-11"><a href="modelizacion-estadistica.html#cb18-11" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y=</span>pct_interesados <span class="sc">*</span> ajuste), <span class="at">group=</span><span class="dv">1</span>, <span class="at">color=</span><span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb18-12"><a href="modelizacion-estadistica.html#cb18-12" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">y=</span>pct_clientes),<span class="at">fill=</span><span class="st">&quot;yellow&quot;</span>,<span class="at">alpha=</span><span class="fl">0.5</span>)  <span class="sc">+</span></span>
<span id="cb18-13"><a href="modelizacion-estadistica.html#cb18-13" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_text</span>(<span class="at">size=</span><span class="dv">3</span>, <span class="fu">aes</span>(<span class="at">y=</span>pct_interesados <span class="sc">*</span> ajuste, <span class="at">label =</span> <span class="fu">paste</span>(pct_interesados,<span class="st">&#39; %&#39;</span>)), <span class="at">color=</span><span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb18-14"><a href="modelizacion-estadistica.html#cb18-14" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_y_continuous</span>(<span class="at">sec.axis =</span> <span class="fu">sec_axis</span>(<span class="sc">~</span>.<span class="sc">/</span>ajuste, <span class="at">name=</span><span class="st">&quot;% interesados&quot;</span>), <span class="at">name=</span><span class="st">&#39;% clientes&#39;</span>) <span class="sc">+</span></span>
<span id="cb18-15"><a href="modelizacion-estadistica.html#cb18-15" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme_light</span>()</span>
<span id="cb18-16"><a href="modelizacion-estadistica.html#cb18-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-17"><a href="modelizacion-estadistica.html#cb18-17" aria-hidden="true" tabindex="-1"></a>g <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste0</span>(<span class="st">&quot;Análisis de la variable &quot;</span>,varib))</span>
<span id="cb18-18"><a href="modelizacion-estadistica.html#cb18-18" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Es necesario realizar este análisis para cada una de las variables cualitativas presentes en el proceso de modelización.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="modelizacion-estadistica.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span>
<span id="cb19-2"><a href="modelizacion-estadistica.html#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="modelizacion-estadistica.html#cb19-3" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">bivariable</span>(entrenamiento, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;Gender&#39;</span>, <span class="fl">0.5</span>)</span>
<span id="cb19-4"><a href="modelizacion-estadistica.html#cb19-4" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">bivariable</span>(entrenamiento, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;Age&#39;</span>, <span class="fl">0.5</span>)</span>
<span id="cb19-5"><a href="modelizacion-estadistica.html#cb19-5" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> <span class="fu">bivariable</span>(entrenamiento, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;Region_Code&#39;</span>, <span class="fl">0.5</span>)</span>
<span id="cb19-6"><a href="modelizacion-estadistica.html#cb19-6" aria-hidden="true" tabindex="-1"></a>p4 <span class="ot">&lt;-</span> <span class="fu">bivariable</span>(entrenamiento, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;Previously_Insured&#39;</span>, <span class="fl">0.5</span>)</span>
<span id="cb19-7"><a href="modelizacion-estadistica.html#cb19-7" aria-hidden="true" tabindex="-1"></a>p5 <span class="ot">&lt;-</span> <span class="fu">bivariable</span>(entrenamiento, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;Vehicle_Age&#39;</span>, <span class="fl">0.5</span>)</span>
<span id="cb19-8"><a href="modelizacion-estadistica.html#cb19-8" aria-hidden="true" tabindex="-1"></a>p6 <span class="ot">&lt;-</span> <span class="fu">bivariable</span>(entrenamiento, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;Vehicle_Damage&#39;</span>, <span class="fl">0.5</span>)</span>
<span id="cb19-9"><a href="modelizacion-estadistica.html#cb19-9" aria-hidden="true" tabindex="-1"></a>p7 <span class="ot">&lt;-</span> <span class="fu">bivariable</span>(entrenamiento, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;Policy_Sales_Channel&#39;</span>, <span class="fl">0.5</span>)</span>
<span id="cb19-10"><a href="modelizacion-estadistica.html#cb19-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-11"><a href="modelizacion-estadistica.html#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(p1,p2,p3,p4,p5,p6,p7, <span class="at">ncol=</span><span class="dv">2</span>)</span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>Situaciones ya conocidas. La variable <code>Age</code> parece discriminar bien pero es necesario trabajar sobre ella. La variable <code>Region_Code</code> es inmanejable al igual que <code>Policy_Sales_Channel</code> debido al alto número de factores. Además, tanto <code>Previosly_Insured</code> como <code>Vehicle_Damage</code> discriminan <em>demasiado bien</em>. La variable <code>Vehicle Age</code> es un factor con orden y en el gráfico éste no se está siguiendo. Por otro lado, quedan por analizar las variables cuantitativas. Es decir, el análisis bivariable está volviendo a la necesidad de depurar los datos.</p>
<p>El primer paso que ha de dar el científico de datos es el que requiera introducir o eliminar observaciones, es necesario determinar que se hace con las variables <code>Previosly_Insured</code> y <code>Vehicle_Damage</code>, ¿se eliminan esos clientes que no muestran ningún tipo de interés en el seguro de Automóviles? Es una decisión que hay que consensuar con los equipos de negocio y en realidad ya está arrojando información acerca del uso que se le puede dar a la encuesta planteada, ¿cómo es posible que no tengan interés un cliente que ya ha estado asegurado?</p>
<p>En este caso se opta por eliminar aquellos segmentos de clientes que no tienen interés en el producto de automóviles aunque se pierda capacidad a la hora de discriminar clientes. Directamente nunca debería realizarse un contacto comercial con aquellos clientes que ya han estado asegurados o que no tienen daños.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="modelizacion-estadistica.html#cb20-1" aria-hidden="true" tabindex="-1"></a>entrenamiento <span class="ot">&lt;-</span> entrenamiento <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Previously_Insured <span class="sc">==</span> <span class="dv">0</span> <span class="sc">|</span> Vehicle_Damage <span class="sc">==</span> <span class="st">&quot;Yes&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="modelizacion-estadistica.html#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Previously_Insured, <span class="sc">-</span>Vehicle_Damage)</span></code></pre></div>
<p>Además, se modifica el orden de la variable <code>Vehicle_Age</code>.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="modelizacion-estadistica.html#cb21-1" aria-hidden="true" tabindex="-1"></a>entrenamiento <span class="ot">&lt;-</span> entrenamiento <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">fr_antiguedad_vehiculo=</span><span class="fu">case_when</span>(</span>
<span id="cb21-2"><a href="modelizacion-estadistica.html#cb21-2" aria-hidden="true" tabindex="-1"></a>  Vehicle_Age<span class="sc">==</span><span class="st">&#39;&lt; 1 Year&#39;</span> <span class="sc">~</span> <span class="st">&#39;1. menos 1 año&#39;</span>,</span>
<span id="cb21-3"><a href="modelizacion-estadistica.html#cb21-3" aria-hidden="true" tabindex="-1"></a>  Vehicle_Age<span class="sc">==</span><span class="st">&#39;1-2 Year&#39;</span> <span class="sc">~</span> <span class="st">&#39;2. entre 1-2 años&#39;</span>,</span>
<span id="cb21-4"><a href="modelizacion-estadistica.html#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&#39;3. mas 2 años&#39;</span>))</span></code></pre></div>
<p>Se crea una nueva variable manteniendo la original. Como recomendación, en el momento de tener una variable trabajada es buena práctica añadir a ésta una denominación que permita identificarla, en este caso se añade el prefijo <code>fr_</code> de <em>factor reclasificado</em>. Esto significa que este factor ya está listo para formar parte del proceso de modelización.</p>
<p>Se repite el análisis bivariable con los factores seleccionados.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="modelizacion-estadistica.html#cb22-1" aria-hidden="true" tabindex="-1"></a>entrenamiento <span class="ot">&lt;-</span> entrenamiento <span class="sc">%&gt;%</span> </span>
<span id="cb22-2"><a href="modelizacion-estadistica.html#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">fr_sexo =</span> Gender)</span>
<span id="cb22-3"><a href="modelizacion-estadistica.html#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="modelizacion-estadistica.html#cb22-4" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">bivariable</span>(entrenamiento, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;fr_sexo&#39;</span>, <span class="fl">0.5</span>)</span>
<span id="cb22-5"><a href="modelizacion-estadistica.html#cb22-5" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">bivariable</span>(entrenamiento, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;Age&#39;</span>, <span class="fl">0.5</span>)</span>
<span id="cb22-6"><a href="modelizacion-estadistica.html#cb22-6" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> <span class="fu">bivariable</span>(entrenamiento, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;Region_Code&#39;</span>, <span class="fl">0.5</span>)</span>
<span id="cb22-7"><a href="modelizacion-estadistica.html#cb22-7" aria-hidden="true" tabindex="-1"></a>p4 <span class="ot">&lt;-</span> <span class="fu">bivariable</span>(entrenamiento, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;fr_antiguedad_vehiculo&#39;</span>, <span class="fl">0.5</span>)</span>
<span id="cb22-8"><a href="modelizacion-estadistica.html#cb22-8" aria-hidden="true" tabindex="-1"></a>p5 <span class="ot">&lt;-</span> <span class="fu">bivariable</span>(entrenamiento, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;Policy_Sales_Channel&#39;</span>, <span class="fl">0.5</span>)</span>
<span id="cb22-9"><a href="modelizacion-estadistica.html#cb22-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-10"><a href="modelizacion-estadistica.html#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(p1,p2,p3,p4,p5, <span class="at">ncol=</span><span class="dv">2</span>)</span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>El siguiente paso será la <strong>agrupación de niveles de factores</strong> se comienza con la agrupación de los factores en estudio. Existen técnicas de agrupación de factores como el WOE (Weight Of Evidence) pero en este caso la agrupación se va a llevar a cabo en función del propio análisis bivariable dividiendo los factores en 3 niveles alto, medio y bajo interés.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="modelizacion-estadistica.html#cb23-1" aria-hidden="true" tabindex="-1"></a>fr_zona <span class="ot">&lt;-</span> entrenamiento <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="modelizacion-estadistica.html#cb23-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Region_Code) <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="modelizacion-estadistica.html#cb23-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">summarise</span>(<span class="at">clientes =</span> <span class="fu">round</span>(<span class="fu">n</span>()<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fu">nrow</span>(entrenamiento),<span class="dv">1</span>),</span>
<span id="cb23-4"><a href="modelizacion-estadistica.html#cb23-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">pct_interesados =</span> <span class="fu">round</span>(<span class="fu">sum</span>(Response)<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fu">n</span>(),<span class="dv">1</span>), </span>
<span id="cb23-5"><a href="modelizacion-estadistica.html#cb23-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">.groups=</span><span class="st">&#39;drop&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb23-6"><a href="modelizacion-estadistica.html#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(pct_interesados))</span>
<span id="cb23-7"><a href="modelizacion-estadistica.html#cb23-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-8"><a href="modelizacion-estadistica.html#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(fr_zona)</span></code></pre></div>
<div id="htmlwidget-2b524d39dac433e18c2b" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-2b524d39dac433e18c2b">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53"],["29","11","18","23","28","41","4","35","38","3","19","21","33","14","30","51","24","52","7","46","6","45","39","8","12","5","13","43","40","48","10","31","1","20","17","32","36","47","9","15","50","16","37","2","42","34","49","22","0","27","25","26","44"],[2.1,1.7,1.1,0.5,35.2,3.9,0.5,1.5,0.7,2.3,0.5,0.7,1.6,0.9,1.9,0.1,0.7,0.1,1,4.7,0.9,1.4,1.4,8.3,0.7,0.4,1,0.7,0.4,1.4,0.8,0.6,0.4,0.6,0.6,0.7,2.2,2.1,0.8,3.4,2.2,0.5,1.5,1,0.1,0.5,0.6,0.3,0.7,0.8,0.5,0.8,0.2],[28.5,28.2,26.7,26.6,25.9,25.7,25.6,25,24.5,23.9,23.6,22.1,22.1,21.9,21.8,21.1,20.9,20.5,20.2,20.2,19.7,19.2,18.7,18.4,18.4,18.2,16.8,16.2,16,15.9,15.4,15.4,15,15,14.6,14.4,13.8,13.7,13.6,13,12.9,12.8,12.8,12.7,12.7,12.6,12.5,12.4,11.7,11.7,11,10,9.1]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Region_Code<\/th>\n      <th>clientes<\/th>\n      <th>pct_interesados<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>De nuevo se reitera la importancia de trabajar con equipos de negocio, es posible que se estén identificando comportamientos zonales interesantes. Para facilitar el trabajo se fijan los siguientes umbrales, alto interés &gt;=20% interesados, medio interés 20-12% de interesados, bajo interés &lt; 12% este establecimiento de umbrales se tiene que hacer mediante análisis y en consenso con los equipos usuarios de los modelos, si esta clasificación es correcta se puede emplear también para la variable <code>Policy_Sales_Channel</code>.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="modelizacion-estadistica.html#cb24-1" aria-hidden="true" tabindex="-1"></a>fr_zona <span class="ot">&lt;-</span> fr_zona <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">fr_zona =</span> <span class="fu">case_when</span>(</span>
<span id="cb24-2"><a href="modelizacion-estadistica.html#cb24-2" aria-hidden="true" tabindex="-1"></a>  pct_interesados<span class="sc">&lt;=</span><span class="dv">12</span> <span class="sc">~</span> <span class="st">&#39;3. bajo interés&#39;</span>,</span>
<span id="cb24-3"><a href="modelizacion-estadistica.html#cb24-3" aria-hidden="true" tabindex="-1"></a>  pct_interesados<span class="sc">&lt;=</span><span class="dv">20</span> <span class="sc">~</span> <span class="st">&#39;2. medio interés&#39;</span>,</span>
<span id="cb24-4"><a href="modelizacion-estadistica.html#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&#39;1. alto interés&#39;</span>))</span>
<span id="cb24-5"><a href="modelizacion-estadistica.html#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="modelizacion-estadistica.html#cb24-6" aria-hidden="true" tabindex="-1"></a>fr_canal <span class="ot">&lt;-</span> entrenamiento <span class="sc">%&gt;%</span></span>
<span id="cb24-7"><a href="modelizacion-estadistica.html#cb24-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Policy_Sales_Channel) <span class="sc">%&gt;%</span></span>
<span id="cb24-8"><a href="modelizacion-estadistica.html#cb24-8" aria-hidden="true" tabindex="-1"></a>   <span class="fu">summarise</span>(<span class="at">clientes =</span> <span class="fu">round</span>(<span class="fu">n</span>()<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fu">nrow</span>(entrenamiento),<span class="dv">1</span>),</span>
<span id="cb24-9"><a href="modelizacion-estadistica.html#cb24-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">pct_interesados =</span> <span class="fu">round</span>(<span class="fu">sum</span>(Response)<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fu">n</span>(),<span class="dv">1</span>), <span class="at">.groups=</span><span class="st">&#39;drop&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb24-10"><a href="modelizacion-estadistica.html#cb24-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(pct_interesados)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-11"><a href="modelizacion-estadistica.html#cb24-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fr_canal =</span> <span class="fu">case_when</span>(</span>
<span id="cb24-12"><a href="modelizacion-estadistica.html#cb24-12" aria-hidden="true" tabindex="-1"></a>  pct_interesados<span class="sc">&lt;=</span><span class="dv">12</span> <span class="sc">~</span> <span class="st">&#39;3. bajo interés&#39;</span>,</span>
<span id="cb24-13"><a href="modelizacion-estadistica.html#cb24-13" aria-hidden="true" tabindex="-1"></a>  pct_interesados<span class="sc">&lt;=</span><span class="dv">20</span> <span class="sc">~</span> <span class="st">&#39;2. medio interés&#39;</span>,</span>
<span id="cb24-14"><a href="modelizacion-estadistica.html#cb24-14" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&#39;1. alto interés&#39;</span>))</span>
<span id="cb24-15"><a href="modelizacion-estadistica.html#cb24-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-16"><a href="modelizacion-estadistica.html#cb24-16" aria-hidden="true" tabindex="-1"></a>entrenamiento <span class="ot">&lt;-</span> entrenamiento <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(<span class="fu">select</span>(fr_zona, Region_Code, fr_zona)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-17"><a href="modelizacion-estadistica.html#cb24-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="fu">select</span>(fr_canal, Policy_Sales_Channel, fr_canal))</span></code></pre></div>
<pre><code>## Joining, by = &quot;Region_Code&quot;
## Joining, by = &quot;Policy_Sales_Channel&quot;</code></pre>
<p>Se crean dos conjuntos de datos con la agrupación del % de clientes interesados y se cruzan con el conjunto de datos de entrenamiento. Ahora se disponen de 2 factores reclasificados que deben estudiarse de forma bivariable.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="modelizacion-estadistica.html#cb26-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">bivariable</span>(entrenamiento, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;fr_zona&#39;</span>, <span class="fl">0.5</span>)</span>
<span id="cb26-2"><a href="modelizacion-estadistica.html#cb26-2" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">bivariable</span>(entrenamiento, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;fr_canal&#39;</span>, <span class="fl">0.5</span>)</span>
<span id="cb26-3"><a href="modelizacion-estadistica.html#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="modelizacion-estadistica.html#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(p1, p2)</span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<p>Es necesario rehacer los factores creados, aparecen niveles con pocos clientes, están descompensados. Hay que iterar con la agrupación de esos factores. No hay una regla para decidir el % de observaciones o de exposición en un nivel, pero por debajo del 5% es necesario plantearse la agrupación de un nivel de un factor.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="modelizacion-estadistica.html#cb27-1" aria-hidden="true" tabindex="-1"></a>fr_zona <span class="ot">&lt;-</span> fr_zona <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">fr_zona =</span> <span class="fu">case_when</span>(</span>
<span id="cb27-2"><a href="modelizacion-estadistica.html#cb27-2" aria-hidden="true" tabindex="-1"></a>  pct_interesados<span class="sc">&lt;=</span><span class="dv">15</span> <span class="sc">~</span> <span class="st">&#39;3. bajo interés&#39;</span>,</span>
<span id="cb27-3"><a href="modelizacion-estadistica.html#cb27-3" aria-hidden="true" tabindex="-1"></a>  pct_interesados<span class="sc">&lt;=</span><span class="dv">20</span> <span class="sc">~</span> <span class="st">&#39;2. medio interés&#39;</span>,</span>
<span id="cb27-4"><a href="modelizacion-estadistica.html#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&#39;1. alto interés&#39;</span>))</span>
<span id="cb27-5"><a href="modelizacion-estadistica.html#cb27-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-6"><a href="modelizacion-estadistica.html#cb27-6" aria-hidden="true" tabindex="-1"></a>fr_canal <span class="ot">&lt;-</span> entrenamiento <span class="sc">%&gt;%</span></span>
<span id="cb27-7"><a href="modelizacion-estadistica.html#cb27-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Policy_Sales_Channel) <span class="sc">%&gt;%</span></span>
<span id="cb27-8"><a href="modelizacion-estadistica.html#cb27-8" aria-hidden="true" tabindex="-1"></a>   <span class="fu">summarise</span>(<span class="at">clientes =</span> <span class="fu">round</span>(<span class="fu">n</span>()<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fu">nrow</span>(entrenamiento),<span class="dv">1</span>),</span>
<span id="cb27-9"><a href="modelizacion-estadistica.html#cb27-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">pct_interesados =</span> <span class="fu">round</span>(<span class="fu">sum</span>(Response)<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fu">n</span>(),<span class="dv">1</span>), <span class="at">.groups=</span><span class="st">&#39;drop&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb27-10"><a href="modelizacion-estadistica.html#cb27-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(pct_interesados)) <span class="sc">%&gt;%</span> </span>
<span id="cb27-11"><a href="modelizacion-estadistica.html#cb27-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fr_canal =</span> <span class="fu">case_when</span>(</span>
<span id="cb27-12"><a href="modelizacion-estadistica.html#cb27-12" aria-hidden="true" tabindex="-1"></a>  pct_interesados<span class="sc">&lt;=</span><span class="dv">15</span> <span class="sc">~</span> <span class="st">&#39;3. bajo interés&#39;</span>,</span>
<span id="cb27-13"><a href="modelizacion-estadistica.html#cb27-13" aria-hidden="true" tabindex="-1"></a>  pct_interesados<span class="sc">&lt;=</span><span class="dv">27</span> <span class="sc">~</span> <span class="st">&#39;2. medio interés&#39;</span>,</span>
<span id="cb27-14"><a href="modelizacion-estadistica.html#cb27-14" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&#39;1. alto interés&#39;</span>))</span>
<span id="cb27-15"><a href="modelizacion-estadistica.html#cb27-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-16"><a href="modelizacion-estadistica.html#cb27-16" aria-hidden="true" tabindex="-1"></a>entrenamiento <span class="ot">&lt;-</span> entrenamiento <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>fr_zona, <span class="sc">-</span>fr_canal) <span class="sc">%&gt;%</span> </span>
<span id="cb27-17"><a href="modelizacion-estadistica.html#cb27-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="fu">select</span>(fr_zona, Region_Code, fr_zona)) <span class="sc">%&gt;%</span> </span>
<span id="cb27-18"><a href="modelizacion-estadistica.html#cb27-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="fu">select</span>(fr_canal, Policy_Sales_Channel, fr_canal))</span></code></pre></div>
<pre><code>## Joining, by = &quot;Region_Code&quot;
## Joining, by = &quot;Policy_Sales_Channel&quot;</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="modelizacion-estadistica.html#cb29-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">bivariable</span>(entrenamiento, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;fr_zona&#39;</span>, <span class="dv">1</span>)</span>
<span id="cb29-2"><a href="modelizacion-estadistica.html#cb29-2" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">bivariable</span>(entrenamiento, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;fr_canal&#39;</span>, <span class="dv">1</span>)</span>
<span id="cb29-3"><a href="modelizacion-estadistica.html#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="modelizacion-estadistica.html#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(p1, p2)</span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p>Este proceso se puede alargar pero tiene importancia debido a que genera factores y <strong>conocimiento de negocio</strong> sobre el problema para el analista. Por ejemplo, se aprecia que hay canales donde no se muestra ningún interés, la media de la proporción está por debajo del 9% y en intereses medios y altos apenas ofrece poder discriminatorio esta variable. Por el momento se mantienen estas agrupaciones.</p>
<p>Una de las variables que están ofreciendo una buena capacidad de discriminar el interés de los clientes por el producto de automóviles es <code>Age</code>, sin embargo, también interesa agruparla. En el capítulo dedicado al muestreo y la inferencia se vio este gráfico.</p>
<p><img src="imagenes/Agrupacion_intervalos.png" /></p>
<p>Los intervalos de confianza son buenos aliados a la hora de agrupar factores porque están estableciendo un rango entre el que la media, la proporción, aparecerá un 95% de las veces. Se mejora la función bivariable con ese código.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="modelizacion-estadistica.html#cb30-1" aria-hidden="true" tabindex="-1"></a>bivariable <span class="ot">&lt;-</span> <span class="cf">function</span>(df, target, varib, <span class="at">ajuste=</span><span class="dv">1</span>){</span>
<span id="cb30-2"><a href="modelizacion-estadistica.html#cb30-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-3"><a href="modelizacion-estadistica.html#cb30-3" aria-hidden="true" tabindex="-1"></a>target <span class="ot">=</span> <span class="fu">as.symbol</span>(target)</span>
<span id="cb30-4"><a href="modelizacion-estadistica.html#cb30-4" aria-hidden="true" tabindex="-1"></a>fr_analisis <span class="ot">=</span> <span class="fu">as.symbol</span>(varib)</span>
<span id="cb30-5"><a href="modelizacion-estadistica.html#cb30-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-6"><a href="modelizacion-estadistica.html#cb30-6" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb30-7"><a href="modelizacion-estadistica.html#cb30-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(<span class="at">factor_analisis =</span> <span class="fu">as.factor</span>(<span class="sc">!!</span>fr_analisis)) <span class="sc">%&gt;%</span></span>
<span id="cb30-8"><a href="modelizacion-estadistica.html#cb30-8" aria-hidden="true" tabindex="-1"></a>   <span class="fu">summarise</span>(<span class="at">pct_clientes =</span> <span class="fu">round</span>(<span class="fu">n</span>()<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fu">nrow</span>(df),<span class="dv">1</span>),</span>
<span id="cb30-9"><a href="modelizacion-estadistica.html#cb30-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">pct_interesados =</span> <span class="fu">round</span>(<span class="fu">sum</span>(<span class="sc">!!</span>target)<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fu">n</span>(),<span class="dv">1</span>),</span>
<span id="cb30-10"><a href="modelizacion-estadistica.html#cb30-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">media_interesados =</span> <span class="fu">round</span>(<span class="fu">mean</span>(<span class="sc">!!</span>target),<span class="dv">3</span>), </span>
<span id="cb30-11"><a href="modelizacion-estadistica.html#cb30-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">z =</span> <span class="sc">-</span><span class="fu">qnorm</span>(<span class="fl">0.025</span>,<span class="dv">0</span>,<span class="dv">1</span>),</span>
<span id="cb30-12"><a href="modelizacion-estadistica.html#cb30-12" aria-hidden="true" tabindex="-1"></a>           <span class="at">desviacion =</span> <span class="fu">sd</span>(<span class="sc">!!</span>target),</span>
<span id="cb30-13"><a href="modelizacion-estadistica.html#cb30-13" aria-hidden="true" tabindex="-1"></a>           <span class="at">n_grupo =</span> <span class="fu">n</span>(),</span>
<span id="cb30-14"><a href="modelizacion-estadistica.html#cb30-14" aria-hidden="true" tabindex="-1"></a>           <span class="at">.groups=</span><span class="st">&#39;drop&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-15"><a href="modelizacion-estadistica.html#cb30-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(desviacion)) <span class="sc">%&gt;%</span> </span>
<span id="cb30-16"><a href="modelizacion-estadistica.html#cb30-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">error_estimacion =</span> z <span class="sc">*</span> (desviacion<span class="sc">/</span><span class="fu">sqrt</span>(n_grupo)),</span>
<span id="cb30-17"><a href="modelizacion-estadistica.html#cb30-17" aria-hidden="true" tabindex="-1"></a>                              <span class="at">lim_inf=</span>media_interesados <span class="sc">-</span> error_estimacion,</span>
<span id="cb30-18"><a href="modelizacion-estadistica.html#cb30-18" aria-hidden="true" tabindex="-1"></a>                              <span class="at">lim_sup=</span>media_interesados <span class="sc">+</span> error_estimacion,</span>
<span id="cb30-19"><a href="modelizacion-estadistica.html#cb30-19" aria-hidden="true" tabindex="-1"></a>         <span class="at">lim_inf =</span> <span class="fu">ifelse</span>(lim_inf<span class="sc">&lt;</span><span class="dv">0</span>, <span class="dv">0</span>, lim_inf)) <span class="sc">%&gt;%</span> </span>
<span id="cb30-20"><a href="modelizacion-estadistica.html#cb30-20" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>factor_analisis)) <span class="sc">+</span></span>
<span id="cb30-21"><a href="modelizacion-estadistica.html#cb30-21" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y=</span>pct_interesados <span class="sc">*</span> ajuste), <span class="at">group=</span><span class="dv">1</span>, <span class="at">color=</span><span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb30-22"><a href="modelizacion-estadistica.html#cb30-22" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">y=</span>pct_clientes),<span class="at">fill=</span><span class="st">&quot;yellow&quot;</span>,<span class="at">alpha=</span><span class="fl">0.5</span>)  <span class="sc">+</span></span>
<span id="cb30-23"><a href="modelizacion-estadistica.html#cb30-23" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_text</span>(<span class="at">size=</span><span class="dv">3</span>, <span class="fu">aes</span>(<span class="at">y=</span>pct_interesados <span class="sc">*</span> ajuste, <span class="at">label =</span> <span class="fu">paste</span>(pct_interesados,<span class="st">&#39; %&#39;</span>)), <span class="at">color=</span><span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb30-24"><a href="modelizacion-estadistica.html#cb30-24" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_y_continuous</span>(<span class="at">sec.axis =</span> <span class="fu">sec_axis</span>(<span class="sc">~</span>.<span class="sc">/</span>ajuste, <span class="at">name=</span><span class="st">&quot;% interesados&quot;</span>), <span class="at">name=</span><span class="st">&#39;% clientes&#39;</span>) <span class="sc">+</span></span>
<span id="cb30-25"><a href="modelizacion-estadistica.html#cb30-25" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">as.numeric</span>(factor_analisis), <span class="at">ymin=</span>lim_inf<span class="sc">*</span>ajuste<span class="sc">*</span><span class="dv">100</span>, <span class="at">ymax=</span>lim_sup<span class="sc">*</span>ajuste<span class="sc">*</span><span class="dv">100</span>), <span class="at">linetype=</span><span class="dv">2</span>, <span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb30-26"><a href="modelizacion-estadistica.html#cb30-26" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme_light</span>()</span>
<span id="cb30-27"><a href="modelizacion-estadistica.html#cb30-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-28"><a href="modelizacion-estadistica.html#cb30-28" aria-hidden="true" tabindex="-1"></a>g <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste0</span>(<span class="st">&quot;Análisis de la variable &quot;</span>,varib))</span>
<span id="cb30-29"><a href="modelizacion-estadistica.html#cb30-29" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb30-30"><a href="modelizacion-estadistica.html#cb30-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-31"><a href="modelizacion-estadistica.html#cb30-31" aria-hidden="true" tabindex="-1"></a><span class="fu">bivariable</span>(entrenamiento, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;Age&#39;</span>, <span class="fl">0.5</span>)</span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<blockquote>
<p>Los códigos de R se van sofisticando y no se estudia su estructura Todo ese código se ha visto con anterioridad. Se insiste en la importancia que tiene para el científico de datos construirse sus funciones y sus herramientas para los análisis exploratorios iniciales.</p>
</blockquote>
<p>Se aprecia como la inferencia estadística hace más efectivo el trabajo del científico de datos. Se pueden crear agrupaciones en base a ese intervalo de confianza, en este caso y para simplificar, se opta por agrupar las edades superiores a 60 años.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="modelizacion-estadistica.html#cb31-1" aria-hidden="true" tabindex="-1"></a>entrenamiento <span class="ot">&lt;-</span> entrenamiento <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">fr_edad =</span> <span class="fu">ifelse</span>(Age<span class="sc">&gt;=</span><span class="dv">60</span>,<span class="dv">60</span>,Age)) </span>
<span id="cb31-2"><a href="modelizacion-estadistica.html#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">bivariable</span>(entrenamiento, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;fr_edad&#39;</span>, <span class="fl">0.8</span>)</span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p>Esta agrupación es insuficiente porque se incumple la proposición de disponer al menos del 5% de observaciones en muchos niveles del factor. Es necesario mejorar la reclasificación.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="modelizacion-estadistica.html#cb32-1" aria-hidden="true" tabindex="-1"></a>entrenamiento <span class="ot">&lt;-</span> entrenamiento <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Age=</span><span class="fu">as.numeric</span>(Age),</span>
<span id="cb32-2"><a href="modelizacion-estadistica.html#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">fr_edad =</span> <span class="fu">case_when</span>(</span>
<span id="cb32-3"><a href="modelizacion-estadistica.html#cb32-3" aria-hidden="true" tabindex="-1"></a> Age <span class="sc">&gt;</span><span class="dv">18</span> <span class="sc">&amp;</span> Age <span class="sc">&lt;=</span><span class="dv">22</span> <span class="sc">~</span> <span class="st">&#39;1. Menores 20 años&#39;</span>,</span>
<span id="cb32-4"><a href="modelizacion-estadistica.html#cb32-4" aria-hidden="true" tabindex="-1"></a> Age <span class="sc">&gt;=</span> <span class="dv">23</span> <span class="sc">&amp;</span> Age <span class="sc">&lt;=</span><span class="dv">24</span> <span class="sc">~</span> <span class="st">&#39;2. Entre 22 y 23 años&#39;</span>,</span>
<span id="cb32-5"><a href="modelizacion-estadistica.html#cb32-5" aria-hidden="true" tabindex="-1"></a> Age <span class="sc">&gt;=</span> <span class="dv">25</span> <span class="sc">&amp;</span> Age <span class="sc">&lt;=</span><span class="dv">30</span> <span class="sc">~</span> <span class="st">&#39;3. Entre 25 y 30 años&#39;</span>,</span>
<span id="cb32-6"><a href="modelizacion-estadistica.html#cb32-6" aria-hidden="true" tabindex="-1"></a> Age <span class="sc">&gt;=</span> <span class="dv">31</span> <span class="sc">&amp;</span> Age <span class="sc">&lt;=</span><span class="dv">35</span> <span class="sc">~</span> <span class="st">&#39;4. Entre 31 y 35 años&#39;</span>,</span>
<span id="cb32-7"><a href="modelizacion-estadistica.html#cb32-7" aria-hidden="true" tabindex="-1"></a> Age <span class="sc">&gt;=</span> <span class="dv">36</span> <span class="sc">&amp;</span> Age <span class="sc">&lt;=</span><span class="dv">45</span> <span class="sc">~</span> <span class="st">&#39;5. Entre 36 y 45 años&#39;</span>,</span>
<span id="cb32-8"><a href="modelizacion-estadistica.html#cb32-8" aria-hidden="true" tabindex="-1"></a> Age <span class="sc">&gt;=</span> <span class="dv">46</span> <span class="sc">&amp;</span> Age <span class="sc">&lt;=</span><span class="dv">60</span> <span class="sc">~</span> <span class="st">&#39;6. Entre 46 y 60 años&#39;</span>,</span>
<span id="cb32-9"><a href="modelizacion-estadistica.html#cb32-9" aria-hidden="true" tabindex="-1"></a> Age <span class="sc">&gt;</span> <span class="dv">60</span>  <span class="sc">~</span> <span class="st">&#39;7. Mayores 60 años&#39;</span>))</span>
<span id="cb32-10"><a href="modelizacion-estadistica.html#cb32-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb32-11"><a href="modelizacion-estadistica.html#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="fu">bivariable</span>(entrenamiento, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;fr_edad&#39;</span>, <span class="fl">0.8</span>)</span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<p>Todos los factores están trabajados, pero es necesario <strong>discretizar las variables cuantitativas</strong> para que puedan formar parte del modelo. Al igual que sucede con los factores existen métodos automáticos como el WOE que permiten realizar esta agrupación, pero se pretende que el científico de datos emplee la estadística aprendida para mejorar sus análisis y el conocimiento de los datos. En el capítulo 11 dedicado al análisis bivariable se planteó un método para agrupar variables cuantitativas trabajando con 10 grupos con el mismo número de clientes. Recuperando ese código:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="modelizacion-estadistica.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Se divide la variable en 10 tramos con el mismo número de observaciones</span></span>
<span id="cb33-2"><a href="modelizacion-estadistica.html#cb33-2" aria-hidden="true" tabindex="-1"></a>grupos <span class="ot">=</span> <span class="dv">10</span></span>
<span id="cb33-3"><a href="modelizacion-estadistica.html#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="modelizacion-estadistica.html#cb33-4" aria-hidden="true" tabindex="-1"></a>entrenamiento <span class="ot">&lt;-</span> entrenamiento <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Annual_Premium) <span class="sc">%&gt;%</span> </span>
<span id="cb33-5"><a href="modelizacion-estadistica.html#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">fr_prima =</span> <span class="fu">as.factor</span>(<span class="fu">ceiling</span>((<span class="fu">row_number</span>()<span class="sc">/</span><span class="fu">n</span>()) <span class="sc">*</span> grupos)))</span>
<span id="cb33-6"><a href="modelizacion-estadistica.html#cb33-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-7"><a href="modelizacion-estadistica.html#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="fu">bivariable</span>(entrenamiento, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;fr_prima&#39;</span>, <span class="fl">0.8</span>)</span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<p>Una simple agrupación de una variable cuantitativa está describiendo la situación, primas bajas muestran menos interés que las primas altas. Además estos niveles son susceptibles de ser agrupados.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="modelizacion-estadistica.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(</span>
<span id="cb34-2"><a href="modelizacion-estadistica.html#cb34-2" aria-hidden="true" tabindex="-1"></a>entrenamiento <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(fr_prima) <span class="sc">%&gt;%</span> </span>
<span id="cb34-3"><a href="modelizacion-estadistica.html#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">minimo =</span> <span class="fu">min</span>(Annual_Premium),</span>
<span id="cb34-4"><a href="modelizacion-estadistica.html#cb34-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">maximo =</span> <span class="fu">max</span>(Annual_Premium)))</span></code></pre></div>
<div id="htmlwidget-2d889f7abc96051b2afa" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-2d889f7abc96051b2afa">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],["1","2","3","4","5","6","7","8","9","10"],[2630,2630,2630,26019,29334,32188,35112,38423,42746,49537],[2630,2630,26019,29334,32188,35111,38423,42746,49537,540165]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>fr_prima<\/th>\n      <th>minimo<\/th>\n      <th>maximo<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>Aparece un valor modal en la prima en 2630 €, sería necesario comunicar de nuevo con los equipos de negocio para que nos comentaran que está sucediendo con ese rango de prima. Con el gráfico anterior y esta tabla se puede plantear una agrupación de este modo:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="modelizacion-estadistica.html#cb35-1" aria-hidden="true" tabindex="-1"></a>entrenamiento <span class="ot">&lt;-</span> entrenamiento <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">fr_prima =</span> <span class="fu">case_when</span>(</span>
<span id="cb35-2"><a href="modelizacion-estadistica.html#cb35-2" aria-hidden="true" tabindex="-1"></a>  Annual_Premium <span class="sc">&lt;=</span> <span class="dv">3000</span> <span class="sc">~</span> <span class="st">&#39;1. Menor de 3000 €&#39;</span>,</span>
<span id="cb35-3"><a href="modelizacion-estadistica.html#cb35-3" aria-hidden="true" tabindex="-1"></a>  Annual_Premium <span class="sc">&lt;=</span> <span class="dv">40000</span> <span class="sc">~</span> <span class="st">&#39;2. Entre 3000 y 40000 €&#39;</span>,</span>
<span id="cb35-4"><a href="modelizacion-estadistica.html#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&#39;3. Más de 40000 €&#39;</span>))</span>
<span id="cb35-5"><a href="modelizacion-estadistica.html#cb35-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-6"><a href="modelizacion-estadistica.html#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="fu">bivariable</span>(entrenamiento, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;fr_prima&#39;</span>, <span class="fl">0.8</span>)</span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<p>Tampoco se aprecia un poder muy discriminatorio para primas superiores a 3000 €. Se repite el proceso con la variable <code>Vintage</code>.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="modelizacion-estadistica.html#cb36-1" aria-hidden="true" tabindex="-1"></a>grupos <span class="ot">=</span> <span class="dv">10</span></span>
<span id="cb36-2"><a href="modelizacion-estadistica.html#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="modelizacion-estadistica.html#cb36-3" aria-hidden="true" tabindex="-1"></a>entrenamiento <span class="ot">&lt;-</span> entrenamiento <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Vintage) <span class="sc">%&gt;%</span> </span>
<span id="cb36-4"><a href="modelizacion-estadistica.html#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">fr_antiguedad =</span> <span class="fu">as.factor</span>(<span class="fu">ceiling</span>((<span class="fu">row_number</span>()<span class="sc">/</span><span class="fu">n</span>()) <span class="sc">*</span> grupos)))</span>
<span id="cb36-5"><a href="modelizacion-estadistica.html#cb36-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-6"><a href="modelizacion-estadistica.html#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="fu">bivariable</span>(entrenamiento, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;fr_antiguedad&#39;</span>, <span class="fl">0.8</span>)</span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<p>Con esta variable el target apenas tiene variación, permanece plano en toda la agrupación de deciles. Algo que se podía intuir con los histogramas previos de la variable ya que la distribución era cuadrada, forma típica de variables aleatorias. Debido a su (aparente) escasa capacidad predictiva no se trabaja más con ella pero participará en el proceso de modelización de modo que sea el modelo el encargado de aceptar o rechazar algunos de los niveles del factor.</p>
</div>
</div>
<div id="el-código-de-reclasificación-de-factores" class="section level2 hasAnchor" number="16.4">
<h2><span class="header-section-number">16.4</span> El código de reclasificación de factores<a href="modelizacion-estadistica.html#el-código-de-reclasificación-de-factores" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Antes de continuar y analizar las interacciones es necesario recopilar y ordenar todo el código R necesario para preparar los datos de cara a la modelización. Este código de reclasificación de factores debe ser parte del modelo y de la <strong>documentación que acompaña al modelo</strong> al igual que los gráficos descriptivos y bivariables. Este paso simplemente recopila los análisis previos y las clasificaciones finales elegidas para cada factor. Además ese código se empleará en los datos de origen ya que es posible replicar el proceso de muestreo.</p>
<p>El primer paso consiste en filtrar por aquellas variables que no aportan al modelo o cuya aportación pueden empeorar el objetivo del proceso de modelización.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="modelizacion-estadistica.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Se mantiene el conjunto de datos inicial</span></span>
<span id="cb37-2"><a href="modelizacion-estadistica.html#cb37-2" aria-hidden="true" tabindex="-1"></a>train2 <span class="ot">&lt;-</span> train <span class="sc">%&gt;%</span> </span>
<span id="cb37-3"><a href="modelizacion-estadistica.html#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Previously_Insured <span class="sc">==</span> <span class="dv">0</span> <span class="sc">|</span> Vehicle_Damage <span class="sc">==</span> <span class="st">&quot;Yes&quot;</span>) </span></code></pre></div>
<p>No se sobrescribe el conjunto de datos de partida, se crea una réplica por si fuera necesario iterar de nuevo con los datos. Una vez filtrados los datos se seleccionan los códigos empleados para la reclasificación.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="modelizacion-estadistica.html#cb38-1" aria-hidden="true" tabindex="-1"></a>train2 <span class="ot">&lt;-</span> train2 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb38-2"><a href="modelizacion-estadistica.html#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">fr_antiguedad_vehiculo=</span><span class="fu">case_when</span>(</span>
<span id="cb38-3"><a href="modelizacion-estadistica.html#cb38-3" aria-hidden="true" tabindex="-1"></a>  Vehicle_Age<span class="sc">==</span><span class="st">&#39;&lt; 1 Year&#39;</span> <span class="sc">~</span> <span class="st">&#39;1. menos 1 año&#39;</span>,</span>
<span id="cb38-4"><a href="modelizacion-estadistica.html#cb38-4" aria-hidden="true" tabindex="-1"></a>  Vehicle_Age<span class="sc">==</span><span class="st">&#39;1-2 Year&#39;</span> <span class="sc">~</span> <span class="st">&#39;2. entre 1-2 años&#39;</span>,</span>
<span id="cb38-5"><a href="modelizacion-estadistica.html#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&#39;3. mas 2 años&#39;</span>),</span>
<span id="cb38-6"><a href="modelizacion-estadistica.html#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">fr_sexo =</span> Gender)</span>
<span id="cb38-7"><a href="modelizacion-estadistica.html#cb38-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-8"><a href="modelizacion-estadistica.html#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Agrupación de zonas</span></span>
<span id="cb38-9"><a href="modelizacion-estadistica.html#cb38-9" aria-hidden="true" tabindex="-1"></a>fr_zona <span class="ot">&lt;-</span> train2 <span class="sc">%&gt;%</span></span>
<span id="cb38-10"><a href="modelizacion-estadistica.html#cb38-10" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Region_Code) <span class="sc">%&gt;%</span></span>
<span id="cb38-11"><a href="modelizacion-estadistica.html#cb38-11" aria-hidden="true" tabindex="-1"></a>   <span class="fu">summarise</span>(<span class="at">clientes =</span> <span class="fu">round</span>(<span class="fu">n</span>()<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fu">nrow</span>(entrenamiento),<span class="dv">1</span>),</span>
<span id="cb38-12"><a href="modelizacion-estadistica.html#cb38-12" aria-hidden="true" tabindex="-1"></a>           <span class="at">pct_interesados =</span> <span class="fu">round</span>(<span class="fu">sum</span>(Response)<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fu">n</span>(),<span class="dv">1</span>), </span>
<span id="cb38-13"><a href="modelizacion-estadistica.html#cb38-13" aria-hidden="true" tabindex="-1"></a>           <span class="at">.groups=</span><span class="st">&#39;drop&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb38-14"><a href="modelizacion-estadistica.html#cb38-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(pct_interesados)) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">fr_zona =</span> <span class="fu">case_when</span>(</span>
<span id="cb38-15"><a href="modelizacion-estadistica.html#cb38-15" aria-hidden="true" tabindex="-1"></a>  pct_interesados<span class="sc">&lt;=</span><span class="dv">12</span> <span class="sc">~</span> <span class="st">&#39;3. bajo interés&#39;</span>,</span>
<span id="cb38-16"><a href="modelizacion-estadistica.html#cb38-16" aria-hidden="true" tabindex="-1"></a>  pct_interesados<span class="sc">&lt;=</span><span class="dv">20</span> <span class="sc">~</span> <span class="st">&#39;2. medio interés&#39;</span>,</span>
<span id="cb38-17"><a href="modelizacion-estadistica.html#cb38-17" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&#39;1. alto interés&#39;</span>))</span>
<span id="cb38-18"><a href="modelizacion-estadistica.html#cb38-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-19"><a href="modelizacion-estadistica.html#cb38-19" aria-hidden="true" tabindex="-1"></a>fr_canal <span class="ot">&lt;-</span> train2 <span class="sc">%&gt;%</span></span>
<span id="cb38-20"><a href="modelizacion-estadistica.html#cb38-20" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Policy_Sales_Channel) <span class="sc">%&gt;%</span></span>
<span id="cb38-21"><a href="modelizacion-estadistica.html#cb38-21" aria-hidden="true" tabindex="-1"></a>   <span class="fu">summarise</span>(<span class="at">clientes =</span> <span class="fu">round</span>(<span class="fu">n</span>()<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fu">nrow</span>(entrenamiento),<span class="dv">1</span>),</span>
<span id="cb38-22"><a href="modelizacion-estadistica.html#cb38-22" aria-hidden="true" tabindex="-1"></a>           <span class="at">pct_interesados =</span> <span class="fu">round</span>(<span class="fu">sum</span>(Response)<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fu">n</span>(),<span class="dv">1</span>), <span class="at">.groups=</span><span class="st">&#39;drop&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb38-23"><a href="modelizacion-estadistica.html#cb38-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(pct_interesados)) <span class="sc">%&gt;%</span> </span>
<span id="cb38-24"><a href="modelizacion-estadistica.html#cb38-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fr_canal =</span> <span class="fu">case_when</span>(</span>
<span id="cb38-25"><a href="modelizacion-estadistica.html#cb38-25" aria-hidden="true" tabindex="-1"></a>  pct_interesados<span class="sc">&lt;=</span><span class="dv">12</span> <span class="sc">~</span> <span class="st">&#39;3. bajo interés&#39;</span>,</span>
<span id="cb38-26"><a href="modelizacion-estadistica.html#cb38-26" aria-hidden="true" tabindex="-1"></a>  pct_interesados<span class="sc">&lt;=</span><span class="dv">20</span> <span class="sc">~</span> <span class="st">&#39;2. medio interés&#39;</span>,</span>
<span id="cb38-27"><a href="modelizacion-estadistica.html#cb38-27" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&#39;1. alto interés&#39;</span>))</span>
<span id="cb38-28"><a href="modelizacion-estadistica.html#cb38-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-29"><a href="modelizacion-estadistica.html#cb38-29" aria-hidden="true" tabindex="-1"></a>train2 <span class="ot">&lt;-</span> train2 <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(<span class="fu">select</span>(fr_zona, Region_Code, fr_zona)) <span class="sc">%&gt;%</span> </span>
<span id="cb38-30"><a href="modelizacion-estadistica.html#cb38-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="fu">select</span>(fr_canal, Policy_Sales_Channel, fr_canal))</span></code></pre></div>
<pre><code>## Joining, by = &quot;Region_Code&quot;
## Joining, by = &quot;Policy_Sales_Channel&quot;</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="modelizacion-estadistica.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Agrupación de factores</span></span>
<span id="cb40-2"><a href="modelizacion-estadistica.html#cb40-2" aria-hidden="true" tabindex="-1"></a>train2 <span class="ot">&lt;-</span> train2 <span class="sc">%&gt;%</span> </span>
<span id="cb40-3"><a href="modelizacion-estadistica.html#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb40-4"><a href="modelizacion-estadistica.html#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Age=</span><span class="fu">as.numeric</span>(Age),</span>
<span id="cb40-5"><a href="modelizacion-estadistica.html#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">fr_edad =</span> <span class="fu">case_when</span>(</span>
<span id="cb40-6"><a href="modelizacion-estadistica.html#cb40-6" aria-hidden="true" tabindex="-1"></a>  Age <span class="sc">&gt;</span><span class="dv">18</span> <span class="sc">&amp;</span> Age <span class="sc">&lt;=</span><span class="dv">22</span> <span class="sc">~</span> <span class="st">&#39;1. Menores 20 años&#39;</span>,</span>
<span id="cb40-7"><a href="modelizacion-estadistica.html#cb40-7" aria-hidden="true" tabindex="-1"></a>  Age <span class="sc">&gt;=</span> <span class="dv">23</span> <span class="sc">&amp;</span> Age <span class="sc">&lt;=</span><span class="dv">24</span> <span class="sc">~</span> <span class="st">&#39;2. Entre 22 y 23 años&#39;</span>,</span>
<span id="cb40-8"><a href="modelizacion-estadistica.html#cb40-8" aria-hidden="true" tabindex="-1"></a>  Age <span class="sc">&gt;=</span> <span class="dv">25</span> <span class="sc">&amp;</span> Age <span class="sc">&lt;=</span><span class="dv">30</span> <span class="sc">~</span> <span class="st">&#39;3. Entre 25 y 30 años&#39;</span>,</span>
<span id="cb40-9"><a href="modelizacion-estadistica.html#cb40-9" aria-hidden="true" tabindex="-1"></a>  Age <span class="sc">&gt;=</span> <span class="dv">31</span> <span class="sc">&amp;</span> Age <span class="sc">&lt;=</span><span class="dv">35</span> <span class="sc">~</span> <span class="st">&#39;4. Entre 31 y 35 años&#39;</span>,</span>
<span id="cb40-10"><a href="modelizacion-estadistica.html#cb40-10" aria-hidden="true" tabindex="-1"></a>  Age <span class="sc">&gt;=</span> <span class="dv">36</span> <span class="sc">&amp;</span> Age <span class="sc">&lt;=</span><span class="dv">45</span> <span class="sc">~</span> <span class="st">&#39;5. Entre 36 y 45 años&#39;</span>,</span>
<span id="cb40-11"><a href="modelizacion-estadistica.html#cb40-11" aria-hidden="true" tabindex="-1"></a>  Age <span class="sc">&gt;=</span> <span class="dv">46</span> <span class="sc">&amp;</span> Age <span class="sc">&lt;=</span><span class="dv">60</span> <span class="sc">~</span> <span class="st">&#39;6. Entre 46 y 60 años&#39;</span>,</span>
<span id="cb40-12"><a href="modelizacion-estadistica.html#cb40-12" aria-hidden="true" tabindex="-1"></a>  Age <span class="sc">&gt;</span> <span class="dv">60</span>  <span class="sc">~</span> <span class="st">&#39;7. Mayores 60 años&#39;</span>),</span>
<span id="cb40-13"><a href="modelizacion-estadistica.html#cb40-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-14"><a href="modelizacion-estadistica.html#cb40-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">fr_prima =</span> <span class="fu">case_when</span>(</span>
<span id="cb40-15"><a href="modelizacion-estadistica.html#cb40-15" aria-hidden="true" tabindex="-1"></a>  Annual_Premium <span class="sc">&lt;=</span> <span class="dv">3000</span> <span class="sc">~</span> <span class="st">&#39;1. Menor de 3000 €&#39;</span>,</span>
<span id="cb40-16"><a href="modelizacion-estadistica.html#cb40-16" aria-hidden="true" tabindex="-1"></a>  Annual_Premium <span class="sc">&lt;=</span> <span class="dv">40000</span> <span class="sc">~</span> <span class="st">&#39;2. Entre 3000 y 40000 €&#39;</span>,</span>
<span id="cb40-17"><a href="modelizacion-estadistica.html#cb40-17" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&#39;3. Más de 40000 €&#39;</span>))</span>
<span id="cb40-18"><a href="modelizacion-estadistica.html#cb40-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-19"><a href="modelizacion-estadistica.html#cb40-19" aria-hidden="true" tabindex="-1"></a>grupos <span class="ot">=</span> <span class="dv">10</span></span>
<span id="cb40-20"><a href="modelizacion-estadistica.html#cb40-20" aria-hidden="true" tabindex="-1"></a>train2 <span class="ot">&lt;-</span> train2 <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Vintage) <span class="sc">%&gt;%</span> </span>
<span id="cb40-21"><a href="modelizacion-estadistica.html#cb40-21" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">fr_antiguedad =</span> <span class="fu">as.factor</span>(<span class="fu">ceiling</span>((<span class="fu">row_number</span>()<span class="sc">/</span><span class="fu">n</span>()) <span class="sc">*</span> grupos)))</span>
<span id="cb40-22"><a href="modelizacion-estadistica.html#cb40-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-23"><a href="modelizacion-estadistica.html#cb40-23" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(<span class="fu">head</span>(train2))</span></code></pre></div>
<div id="htmlwidget-e0079c517cf8adc7a9d7" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-e0079c517cf8adc7a9d7">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6"],[329,806,1567,1797,2090,2138],["Male","Male","Female","Female","Male","Female"],[39,38,73,41,42,38],[1,1,1,1,1,1],[28,48,28,28,33,8],[0,0,0,0,0,0],["1-2 Year","1-2 Year","&gt; 2 Years","1-2 Year","1-2 Year","1-2 Year"],["Yes","Yes","Yes","Yes","Yes","Yes"],[38036,2630,29932,2630,29684,41998],[157,124,124,155,124,124],[10,10,10,10,10,10],[0,1,0,1,1,0],["2. entre 1-2 años","2. entre 1-2 años","3. mas 2 años","2. entre 1-2 años","2. entre 1-2 años","2. entre 1-2 años"],["Male","Male","Female","Female","Male","Female"],["1. alto interés","2. medio interés","1. alto interés","1. alto interés","1. alto interés","2. medio interés"],["1. alto interés","1. alto interés","1. alto interés","1. alto interés","1. alto interés","1. alto interés"],["5. Entre 36 y 45 años","5. Entre 36 y 45 años","7. Mayores 60 años","5. Entre 36 y 45 años","5. Entre 36 y 45 años","5. Entre 36 y 45 años"],["2. Entre 3000 y 40000 €","1. Menor de 3000 €","2. Entre 3000 y 40000 €","1. Menor de 3000 €","2. Entre 3000 y 40000 €","3. Más de 40000 €"],["1","1","1","1","1","1"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>id<\/th>\n      <th>Gender<\/th>\n      <th>Age<\/th>\n      <th>Driving_License<\/th>\n      <th>Region_Code<\/th>\n      <th>Previously_Insured<\/th>\n      <th>Vehicle_Age<\/th>\n      <th>Vehicle_Damage<\/th>\n      <th>Annual_Premium<\/th>\n      <th>Policy_Sales_Channel<\/th>\n      <th>Vintage<\/th>\n      <th>Response<\/th>\n      <th>fr_antiguedad_vehiculo<\/th>\n      <th>fr_sexo<\/th>\n      <th>fr_zona<\/th>\n      <th>fr_canal<\/th>\n      <th>fr_edad<\/th>\n      <th>fr_prima<\/th>\n      <th>fr_antiguedad<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,3,4,5,6,9,10,11,12]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>Se mantienen todas las variables en bruto, las iniciales, por si fuera necesario volver atrás y realizar una nueva agrupación o reclasificación. Siempre es necesario ejecutar el análisis bivariable para que forme parte de la documentación de todo el proceso.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="modelizacion-estadistica.html#cb41-1" aria-hidden="true" tabindex="-1"></a>predictoras <span class="ot">&lt;-</span> <span class="fu">names</span>(train2) </span>
<span id="cb41-2"><a href="modelizacion-estadistica.html#cb41-2" aria-hidden="true" tabindex="-1"></a>predictoras <span class="ot">&lt;-</span> predictoras[<span class="fu">substr</span>(predictoras,<span class="dv">1</span>,<span class="dv">3</span>)<span class="sc">==</span><span class="st">&quot;fr_&quot;</span>]</span>
<span id="cb41-3"><a href="modelizacion-estadistica.html#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="modelizacion-estadistica.html#cb41-4" aria-hidden="true" tabindex="-1"></a>lista_graficos <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb41-5"><a href="modelizacion-estadistica.html#cb41-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-6"><a href="modelizacion-estadistica.html#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(predictoras))){</span>
<span id="cb41-7"><a href="modelizacion-estadistica.html#cb41-7" aria-hidden="true" tabindex="-1"></a>  lista_graficos[[i]] <span class="ot">&lt;-</span> <span class="fu">bivariable</span>(train2, <span class="st">&#39;Response&#39;</span>, predictoras[i], <span class="fl">0.8</span>)</span>
<span id="cb41-8"><a href="modelizacion-estadistica.html#cb41-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Otro de los motivos por los que es interesante identificar de algún modo los factores reclasificados que formarán parte del modelo es la posibilidad de automatizar código como ilustra el ejemplo anterior ya que no ha sido necesario escribir el nombre de la variable, además será un código que el científico de datos podrá reutilizar.</p>
<p>Se ha creado una lista con los gráficos que podrán ser obtenidos mediante <code>grid.arrange</code> del siguiente modo.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="modelizacion-estadistica.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(<span class="at">grobs =</span> lista_graficos, <span class="at">ncol=</span><span class="dv">2</span>)</span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<p>Insistiendo, todos estos resultados deben acompañar a la documentación que el científico de datos genere cuando realice el modelo. Cuanto más automatizado esté el proceso de generación de análisis previos, gráficos y documentación menos tiempo se dedicará a esta relevante tarea, cuanto más documentado esté el proceso más sencillo será de replicar.</p>
</div>
<div id="análisis-de-interacciones" class="section level2 hasAnchor" number="16.5">
<h2><span class="header-section-number">16.5</span> Análisis de interacciones<a href="modelizacion-estadistica.html#análisis-de-interacciones" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>El último paso de la fase previa sobre el conocimiento de los datos será el análisis de interacciones. Definidos los factores que van a formar parte del modelo es posible trabajar sobre ellos para encontrar posibles interacciones entre ellos. Las interacciones serán más fáciles de analizar si los factores presentes tienen un número bajo de niveles, de nuevo se recomienda que el científico de datos disponga de herramientas y análisis gráficos para estudiar esta situación. Un posible análisis gráfico puede ser.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="modelizacion-estadistica.html#cb43-1" aria-hidden="true" tabindex="-1"></a>train2 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(fr_antiguedad_vehiculo, fr_sexo) <span class="sc">%&gt;%</span> </span>
<span id="cb43-2"><a href="modelizacion-estadistica.html#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">pct_clientes =</span> <span class="fu">round</span>(<span class="fu">n</span>()<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fu">nrow</span>(train2),<span class="dv">1</span>),</span>
<span id="cb43-3"><a href="modelizacion-estadistica.html#cb43-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">pct_interesados =</span> <span class="fu">round</span>(<span class="fu">sum</span>(Response)<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fu">n</span>(),<span class="dv">1</span>), </span>
<span id="cb43-4"><a href="modelizacion-estadistica.html#cb43-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups=</span><span class="st">&#39;drop&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb43-5"><a href="modelizacion-estadistica.html#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> fr_antiguedad_vehiculo, <span class="at">y =</span> pct_interesados, <span class="at">group=</span>fr_sexo, <span class="at">color =</span> fr_sexo)) <span class="sc">+</span></span>
<span id="cb43-6"><a href="modelizacion-estadistica.html#cb43-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<p>Sobre esta propuesta se crea una función.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="modelizacion-estadistica.html#cb44-1" aria-hidden="true" tabindex="-1"></a>interacciones <span class="ot">&lt;-</span> <span class="cf">function</span>(df, target, varib1, varib2){</span>
<span id="cb44-2"><a href="modelizacion-estadistica.html#cb44-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-3"><a href="modelizacion-estadistica.html#cb44-3" aria-hidden="true" tabindex="-1"></a>target <span class="ot">=</span> <span class="fu">as.symbol</span>(target)</span>
<span id="cb44-4"><a href="modelizacion-estadistica.html#cb44-4" aria-hidden="true" tabindex="-1"></a>fr_analisis1 <span class="ot">=</span> <span class="fu">as.symbol</span>(varib1)</span>
<span id="cb44-5"><a href="modelizacion-estadistica.html#cb44-5" aria-hidden="true" tabindex="-1"></a>fr_analisis2 <span class="ot">=</span> <span class="fu">as.symbol</span>(varib2)</span>
<span id="cb44-6"><a href="modelizacion-estadistica.html#cb44-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-7"><a href="modelizacion-estadistica.html#cb44-7" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb44-8"><a href="modelizacion-estadistica.html#cb44-8" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(<span class="sc">!!</span>fr_analisis1, <span class="sc">!!</span>fr_analisis2) <span class="sc">%&gt;%</span></span>
<span id="cb44-9"><a href="modelizacion-estadistica.html#cb44-9" aria-hidden="true" tabindex="-1"></a>   <span class="fu">summarise</span>(<span class="at">pct_interesados =</span> <span class="fu">round</span>(<span class="fu">sum</span>(<span class="sc">!!</span>target)<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fu">n</span>(),<span class="dv">1</span>), </span>
<span id="cb44-10"><a href="modelizacion-estadistica.html#cb44-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">.groups=</span><span class="st">&#39;drop&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb44-11"><a href="modelizacion-estadistica.html#cb44-11" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="sc">!!</span>fr_analisis1, <span class="at">y =</span> pct_interesados, <span class="at">group=</span><span class="sc">!!</span>fr_analisis2, <span class="at">color =</span> <span class="sc">!!</span>fr_analisis2)) <span class="sc">+</span></span>
<span id="cb44-12"><a href="modelizacion-estadistica.html#cb44-12" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_line</span>() <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb44-13"><a href="modelizacion-estadistica.html#cb44-13" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme_light</span>()</span>
<span id="cb44-14"><a href="modelizacion-estadistica.html#cb44-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-15"><a href="modelizacion-estadistica.html#cb44-15" aria-hidden="true" tabindex="-1"></a>g <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste0</span>(<span class="st">&quot;Interacción de &quot;</span>,varib1,<span class="st">&quot; con &quot;</span>,varib2))</span>
<span id="cb44-16"><a href="modelizacion-estadistica.html#cb44-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-17"><a href="modelizacion-estadistica.html#cb44-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-18"><a href="modelizacion-estadistica.html#cb44-18" aria-hidden="true" tabindex="-1"></a><span class="fu">interacciones</span>(train2, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;fr_antiguedad_vehiculo&#39;</span>, <span class="st">&#39;fr_sexo&#39;</span>)</span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="modelizacion-estadistica.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">interacciones</span>(train2, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;fr_zona&#39;</span>, <span class="st">&#39;fr_canal&#39;</span>)</span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-30-2.png" width="672" /></p>
<p>Se obtienen 2 ejemplos, el cruce entre antigüedad del vehículo y sexo y el cruce entre canal y zona. En el primero parece existir cierta interacción entre los factores y en el segundo las tres líneas son “paralelas”. Este proceso es arduo y requiere reprocesar los factores continuamente, pero proporcionará al científico de datos variables y conocimiento del problema a analizar. En este caso no se profundiza en ello para no alargar demasiado el capítulo.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="modelos-GLM.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rvaquerizo02/edit/master/15-Modelizacion-estadistica-1.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
