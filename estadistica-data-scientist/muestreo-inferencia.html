<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 12 Muestreo e inferencia estadística | Introducción a la Estadística para Científicos de Datos con R</title>
  <meta name="description" content="Libro de introducción a la estadística" />
  <meta name="generator" content="bookdown 0.28 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 12 Muestreo e inferencia estadística | Introducción a la Estadística para Científicos de Datos con R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Libro de introducción a la estadística" />
  <meta name="github-repo" content="https://github.com/rvaquerizo02/Estadistica-data-scientist" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 12 Muestreo e inferencia estadística | Introducción a la Estadística para Científicos de Datos con R" />
  
  <meta name="twitter:description" content="Libro de introducción a la estadística" />
  

<meta name="author" content="Raul Vaquerizo" />


<meta name="date" content="2023-08-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="analisis-bivariable.html"/>
<link rel="next" href="regresion-lineal.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.24/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introducción a la Estadística para Científicos de Datos con R/a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introducción</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#objetivos"><i class="fa fa-check"></i><b>1.1</b> Objetivos</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#entorno-de-trabajo"><i class="fa fa-check"></i><b>1.2</b> Entorno de trabajo</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="datos.html"><a href="datos.html"><i class="fa fa-check"></i><b>2</b> Datos</a>
<ul>
<li class="chapter" data-level="2.1" data-path="datos.html"><a href="datos.html#qué-son-los-datos"><i class="fa fa-check"></i><b>2.1</b> Qué son los datos</a></li>
<li class="chapter" data-level="2.2" data-path="datos.html"><a href="datos.html#tipos-de-datos"><i class="fa fa-check"></i><b>2.2</b> Tipos de datos</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="datos.html"><a href="datos.html#datos-internos"><i class="fa fa-check"></i><b>2.2.1</b> Datos internos</a></li>
<li class="chapter" data-level="2.2.2" data-path="datos.html"><a href="datos.html#datos-externos"><i class="fa fa-check"></i><b>2.2.2</b> Datos externos:</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="datos.html"><a href="datos.html#almacenamiento-de-datos"><i class="fa fa-check"></i><b>2.3</b> Almacenamiento de datos</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="datos.html"><a href="datos.html#sistemas-operacionales"><i class="fa fa-check"></i><b>2.3.1</b> Sistemas operacionales</a></li>
<li class="chapter" data-level="2.3.2" data-path="datos.html"><a href="datos.html#sistemas-informacionales-tradicionales"><i class="fa fa-check"></i><b>2.3.2</b> Sistemas informacionales tradicionales</a></li>
<li class="chapter" data-level="2.3.3" data-path="datos.html"><a href="datos.html#data-lake"><i class="fa fa-check"></i><b>2.3.3</b> Data Lake</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="datos.html"><a href="datos.html#todo-es-álgebra-lineal"><i class="fa fa-check"></i><b>2.4</b> Todo es álgebra lineal</a></li>
<li class="chapter" data-level="2.5" data-path="datos.html"><a href="datos.html#como-se-disponen-los-datos"><i class="fa fa-check"></i><b>2.5</b> Como se disponen los datos</a></li>
<li class="chapter" data-level="2.6" data-path="datos.html"><a href="datos.html#tipos-de-variables"><i class="fa fa-check"></i><b>2.6</b> Tipos de Variables</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="datos.html"><a href="datos.html#variables-cuantitativas"><i class="fa fa-check"></i><b>2.6.1</b> Variables cuantitativas</a></li>
<li class="chapter" data-level="2.6.2" data-path="datos.html"><a href="datos.html#variables-cualitativas.-factores"><i class="fa fa-check"></i><b>2.6.2</b> Variables cualitativas. Factores</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="datos.html"><a href="datos.html#el-rol-de-las-variables-en-los-datos"><i class="fa fa-check"></i><b>2.7</b> El rol de las variables en los datos</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="manejo-de-datos-con-r.html"><a href="manejo-de-datos-con-r.html"><i class="fa fa-check"></i><b>3</b> Manejo de datos con R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="manejo-de-datos-con-r.html"><a href="manejo-de-datos-con-r.html#universo-tidyverse"><i class="fa fa-check"></i><b>3.1</b> Universo tidyverse</a></li>
<li class="chapter" data-level="3.2" data-path="manejo-de-datos-con-r.html"><a href="manejo-de-datos-con-r.html#selección-de-registros"><i class="fa fa-check"></i><b>3.2</b> Selección de registros</a></li>
<li class="chapter" data-level="3.3" data-path="manejo-de-datos-con-r.html"><a href="manejo-de-datos-con-r.html#selección-de-columnas"><i class="fa fa-check"></i><b>3.3</b> Selección de columnas</a></li>
<li class="chapter" data-level="3.4" data-path="manejo-de-datos-con-r.html"><a href="manejo-de-datos-con-r.html#creación-o-actualización-de-variables"><i class="fa fa-check"></i><b>3.4</b> Creación o actualización de variables</a></li>
<li class="chapter" data-level="3.5" data-path="manejo-de-datos-con-r.html"><a href="manejo-de-datos-con-r.html#ordenar-datos"><i class="fa fa-check"></i><b>3.5</b> Ordenar datos</a></li>
<li class="chapter" data-level="3.6" data-path="manejo-de-datos-con-r.html"><a href="manejo-de-datos-con-r.html#sumarizar-valores"><i class="fa fa-check"></i><b>3.6</b> Sumarizar valores</a></li>
<li class="chapter" data-level="3.7" data-path="manejo-de-datos-con-r.html"><a href="manejo-de-datos-con-r.html#combinación-de-acciones"><i class="fa fa-check"></i><b>3.7</b> Combinación de acciones</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="uniones-de-tablas-con-r.html"><a href="uniones-de-tablas-con-r.html"><i class="fa fa-check"></i><b>4</b> Uniones de tablas con R</a>
<ul>
<li class="chapter" data-level="4.1" data-path="uniones-de-tablas-con-r.html"><a href="uniones-de-tablas-con-r.html#uniones-verticales"><i class="fa fa-check"></i><b>4.1</b> Uniones verticales</a></li>
<li class="chapter" data-level="4.2" data-path="uniones-de-tablas-con-r.html"><a href="uniones-de-tablas-con-r.html#uniones-horizontales-o-join"><i class="fa fa-check"></i><b>4.2</b> Uniones horizontales o <em>join</em></a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="uniones-de-tablas-con-r.html"><a href="uniones-de-tablas-con-r.html#inner-join"><i class="fa fa-check"></i><b>4.2.1</b> Inner join</a></li>
<li class="chapter" data-level="4.2.2" data-path="uniones-de-tablas-con-r.html"><a href="uniones-de-tablas-con-r.html#left-join"><i class="fa fa-check"></i><b>4.2.2</b> Left join</a></li>
<li class="chapter" data-level="4.2.3" data-path="uniones-de-tablas-con-r.html"><a href="uniones-de-tablas-con-r.html#anti-join"><i class="fa fa-check"></i><b>4.2.3</b> Anti join</a></li>
<li class="chapter" data-level="4.2.4" data-path="uniones-de-tablas-con-r.html"><a href="uniones-de-tablas-con-r.html#librería-sqldf"><i class="fa fa-check"></i><b>4.2.4</b> Librería sqldf</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="uniones-de-tablas-con-r.html"><a href="uniones-de-tablas-con-r.html#duplicidades-en-las-uniones-de-tablas"><i class="fa fa-check"></i><b>4.3</b> Duplicidades en las uniones de tablas</a></li>
<li class="chapter" data-level="4.4" data-path="uniones-de-tablas-con-r.html"><a href="uniones-de-tablas-con-r.html#referencias"><i class="fa fa-check"></i><b>4.4</b> Referencias</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="basicos-ggplot.html"><a href="basicos-ggplot.html"><i class="fa fa-check"></i><b>5</b> Representación gráfica básica con ggplot</a>
<ul>
<li class="chapter" data-level="5.1" data-path="basicos-ggplot.html"><a href="basicos-ggplot.html#histogramas"><i class="fa fa-check"></i><b>5.1</b> Histogramas</a></li>
<li class="chapter" data-level="5.2" data-path="basicos-ggplot.html"><a href="basicos-ggplot.html#gráficos-de-densidad"><i class="fa fa-check"></i><b>5.2</b> Gráficos de densidad</a></li>
<li class="chapter" data-level="5.3" data-path="basicos-ggplot.html"><a href="basicos-ggplot.html#gráficos-de-caja-boxplot"><i class="fa fa-check"></i><b>5.3</b> Gráficos de caja (boxplot)</a></li>
<li class="chapter" data-level="5.4" data-path="basicos-ggplot.html"><a href="basicos-ggplot.html#gráficos-de-tarta"><i class="fa fa-check"></i><b>5.4</b> Gráficos de tarta</a></li>
<li class="chapter" data-level="5.5" data-path="basicos-ggplot.html"><a href="basicos-ggplot.html#gráficos-de-barras"><i class="fa fa-check"></i><b>5.5</b> Gráficos de barras</a></li>
<li class="chapter" data-level="5.6" data-path="basicos-ggplot.html"><a href="basicos-ggplot.html#gráficos-de-líneas"><i class="fa fa-check"></i><b>5.6</b> Gráficos de líneas</a></li>
<li class="chapter" data-level="5.7" data-path="basicos-ggplot.html"><a href="basicos-ggplot.html#gráfico-de-dispersión"><i class="fa fa-check"></i><b>5.7</b> Gráfico de dispersión</a></li>
<li class="chapter" data-level="5.8" data-path="basicos-ggplot.html"><a href="basicos-ggplot.html#múltiples-gráficos-con-gridextra"><i class="fa fa-check"></i><b>5.8</b> Múltiples gráficos con gridExtra</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="descripcion-numerica-variables.html"><a href="descripcion-numerica-variables.html"><i class="fa fa-check"></i><b>6</b> Descripción numérica de variables</a>
<ul>
<li class="chapter" data-level="6.1" data-path="descripcion-numerica-variables.html"><a href="descripcion-numerica-variables.html#transformar-datos-en-información"><i class="fa fa-check"></i><b>6.1</b> Transformar datos en información</a></li>
<li class="chapter" data-level="6.2" data-path="descripcion-numerica-variables.html"><a href="descripcion-numerica-variables.html#caso-práctico.-campaña-de-venta-cruzada"><i class="fa fa-check"></i><b>6.2</b> Caso práctico. Campaña de venta cruzada</a></li>
<li class="chapter" data-level="6.3" data-path="descripcion-numerica-variables.html"><a href="descripcion-numerica-variables.html#el-rol-de-las-variables-en-el-conjunto-de-datos"><i class="fa fa-check"></i><b>6.3</b> El rol de las variables en el conjunto de datos</a></li>
<li class="chapter" data-level="6.4" data-path="descripcion-numerica-variables.html"><a href="descripcion-numerica-variables.html#análisis-descriptivos-de-los-datos"><i class="fa fa-check"></i><b>6.4</b> Análisis descriptivos de los datos</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="descripcion-numerica-variables.html"><a href="descripcion-numerica-variables.html#descritivos-en-variables-cualitativas-factores"><i class="fa fa-check"></i><b>6.4.1</b> Descritivos en variables cualitativas (factores)</a></li>
<li class="chapter" data-level="6.4.2" data-path="descripcion-numerica-variables.html"><a href="descripcion-numerica-variables.html#descritivos-en-variables-cuantitativas"><i class="fa fa-check"></i><b>6.4.2</b> Descritivos en variables cuantitativas</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="descripcion-grafica-datos.html"><a href="descripcion-grafica-datos.html"><i class="fa fa-check"></i><b>7</b> Descripción gráfica de datos</a>
<ul>
<li class="chapter" data-level="7.1" data-path="descripcion-grafica-datos.html"><a href="descripcion-grafica-datos.html#descripción-gráfica-de-factores"><i class="fa fa-check"></i><b>7.1</b> Descripción gráfica de factores</a></li>
<li class="chapter" data-level="7.2" data-path="descripcion-grafica-datos.html"><a href="descripcion-grafica-datos.html#descripción-gráfica-de-variables-numéricas"><i class="fa fa-check"></i><b>7.2</b> Descripción gráfica de variables numéricas</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="problemas-datos.html"><a href="problemas-datos.html"><i class="fa fa-check"></i><b>8</b> Problemas con los datos</a>
<ul>
<li class="chapter" data-level="8.1" data-path="problemas-datos.html"><a href="problemas-datos.html#problemática-con-factores"><i class="fa fa-check"></i><b>8.1</b> Problemática con factores</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="problemas-datos.html"><a href="problemas-datos.html#factores-con-niveles-de-pocos-registros"><i class="fa fa-check"></i><b>8.1.1</b> Factores con niveles de pocos registros</a></li>
<li class="chapter" data-level="8.1.2" data-path="problemas-datos.html"><a href="problemas-datos.html#factores-que-aparecen-como-variables-numéricas"><i class="fa fa-check"></i><b>8.1.2</b> Factores que aparecen como variables numéricas</a></li>
<li class="chapter" data-level="8.1.3" data-path="problemas-datos.html"><a href="problemas-datos.html#factores-con-un-gran-número-de-niveles"><i class="fa fa-check"></i><b>8.1.3</b> Factores con un gran número de niveles</a></li>
<li class="chapter" data-level="8.1.4" data-path="problemas-datos.html"><a href="problemas-datos.html#factores-con-valores-perdidos"><i class="fa fa-check"></i><b>8.1.4</b> Factores con valores perdidos</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="problemas-datos.html"><a href="problemas-datos.html#problemas-con-variables-numéricas"><i class="fa fa-check"></i><b>8.2</b> Problemas con variables numéricas</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="problemas-datos.html"><a href="problemas-datos.html#valores-modales"><i class="fa fa-check"></i><b>8.2.1</b> Valores modales</a></li>
<li class="chapter" data-level="8.2.2" data-path="problemas-datos.html"><a href="problemas-datos.html#valores-atípicos"><i class="fa fa-check"></i><b>8.2.2</b> Valores atípicos</a></li>
<li class="chapter" data-level="8.2.3" data-path="problemas-datos.html"><a href="problemas-datos.html#variables-numéricas-como-factores"><i class="fa fa-check"></i><b>8.2.3</b> Variables numéricas como factores</a></li>
<li class="chapter" data-level="8.2.4" data-path="problemas-datos.html"><a href="problemas-datos.html#valores-perdidos-en-variables-numéricas"><i class="fa fa-check"></i><b>8.2.4</b> Valores perdidos en variables numéricas</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="analisis-exploratorio-datos-EDA.html"><a href="analisis-exploratorio-datos-EDA.html"><i class="fa fa-check"></i><b>9</b> Análisis Exploratorio de Datos. EDA</a></li>
<li class="chapter" data-level="10" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html"><i class="fa fa-check"></i><b>10</b> Probabilidad y distribuciones</a>
<ul>
<li class="chapter" data-level="10.1" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#conceptos-básicos-de-probabilidad"><i class="fa fa-check"></i><b>10.1</b> Conceptos básicos de probabilidad</a></li>
<li class="chapter" data-level="10.2" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#distribución-de-un-evento"><i class="fa fa-check"></i><b>10.2</b> Distribución de un evento</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#distribuciones-conocidas"><i class="fa fa-check"></i><b>10.2.1</b> Distribuciones conocidas</a></li>
<li class="chapter" data-level="10.2.2" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#obtención-de-probabilidades-con-r"><i class="fa fa-check"></i><b>10.2.2</b> Obtención de probabilidades con R</a></li>
<li class="chapter" data-level="10.2.3" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#generación-de-números-aleatorios-con-r"><i class="fa fa-check"></i><b>10.2.3</b> Generación de números aleatorios con R</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#distribuciones-discretas"><i class="fa fa-check"></i><b>10.3</b> Distribuciones discretas</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#distribución-de-bernoulli"><i class="fa fa-check"></i><b>10.3.1</b> Distribución de Bernoulli</a></li>
<li class="chapter" data-level="10.3.2" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#distribución-binomial"><i class="fa fa-check"></i><b>10.3.2</b> Distribución binomial</a></li>
<li class="chapter" data-level="10.3.3" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#distribución-de-poisson"><i class="fa fa-check"></i><b>10.3.3</b> Distribución de Poisson</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#distribuciones-continuas"><i class="fa fa-check"></i><b>10.4</b> Distribuciones continuas</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#distribución-uniforme"><i class="fa fa-check"></i><b>10.4.1</b> Distribución uniforme</a></li>
<li class="chapter" data-level="10.4.2" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#distribución-normal"><i class="fa fa-check"></i><b>10.4.2</b> Distribución normal</a></li>
<li class="chapter" data-level="10.4.3" data-path="probabilidad-distribuciones.html"><a href="probabilidad-distribuciones.html#distribución-gamma"><i class="fa fa-check"></i><b>10.4.3</b> Distribución gamma</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="analisis-bivariable.html"><a href="analisis-bivariable.html"><i class="fa fa-check"></i><b>11</b> Análisis bivariable</a>
<ul>
<li class="chapter" data-level="11.1" data-path="analisis-bivariable.html"><a href="analisis-bivariable.html#variable-numérica-frente-a-variable-numérica"><i class="fa fa-check"></i><b>11.1</b> Variable numérica frente a variable numérica</a></li>
<li class="chapter" data-level="11.2" data-path="analisis-bivariable.html"><a href="analisis-bivariable.html#factores-frente-a-variables-numéricas"><i class="fa fa-check"></i><b>11.2</b> Factores frente a variables numéricas</a></li>
<li class="chapter" data-level="11.3" data-path="analisis-bivariable.html"><a href="analisis-bivariable.html#factores-frente-a-factores"><i class="fa fa-check"></i><b>11.3</b> Factores frente a factores</a></li>
<li class="chapter" data-level="11.4" data-path="analisis-bivariable.html"><a href="analisis-bivariable.html#propuesta-de-análisis-gráfico-para-el-análisis-bivariable"><i class="fa fa-check"></i><b>11.4</b> Propuesta de análisis gráfico para el análisis bivariable</a></li>
<li class="chapter" data-level="11.5" data-path="analisis-bivariable.html"><a href="analisis-bivariable.html#correlación-entre-factores.-la-v-de-cramer"><i class="fa fa-check"></i><b>11.5</b> Correlación entre factores. La V de Cramer</a></li>
<li class="chapter" data-level="11.6" data-path="analisis-bivariable.html"><a href="analisis-bivariable.html#agrupación-de-variables-cuantitativas"><i class="fa fa-check"></i><b>11.6</b> Agrupación de variables cuantitativas</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="muestreo-inferencia.html"><a href="muestreo-inferencia.html"><i class="fa fa-check"></i><b>12</b> Muestreo e inferencia estadística</a>
<ul>
<li class="chapter" data-level="12.1" data-path="muestreo-inferencia.html"><a href="muestreo-inferencia.html#muestreo"><i class="fa fa-check"></i><b>12.1</b> Muestreo</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="muestreo-inferencia.html"><a href="muestreo-inferencia.html#muestreo-aleatorio-simple"><i class="fa fa-check"></i><b>12.1.1</b> Muestreo aleatorio simple</a></li>
<li class="chapter" data-level="12.1.2" data-path="muestreo-inferencia.html"><a href="muestreo-inferencia.html#muestreo-aleatorio-estratificado"><i class="fa fa-check"></i><b>12.1.2</b> Muestreo aleatorio estratificado</a></li>
<li class="chapter" data-level="12.1.3" data-path="muestreo-inferencia.html"><a href="muestreo-inferencia.html#muestreo-por-conglomerados"><i class="fa fa-check"></i><b>12.1.3</b> Muestreo por conglomerados</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="muestreo-inferencia.html"><a href="muestreo-inferencia.html#inferencia-estadística"><i class="fa fa-check"></i><b>12.2</b> Inferencia estadística</a></li>
<li class="chapter" data-level="12.3" data-path="muestreo-inferencia.html"><a href="muestreo-inferencia.html#estimación-de-parámetros"><i class="fa fa-check"></i><b>12.3</b> Estimación de parámetros</a></li>
<li class="chapter" data-level="12.4" data-path="muestreo-inferencia.html"><a href="muestreo-inferencia.html#intervalos-de-confianza"><i class="fa fa-check"></i><b>12.4</b> Intervalos de confianza</a></li>
<li class="chapter" data-level="12.5" data-path="muestreo-inferencia.html"><a href="muestreo-inferencia.html#contrastes-de-hipótesis"><i class="fa fa-check"></i><b>12.5</b> Contrastes de hipótesis</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="regresion-lineal.html"><a href="regresion-lineal.html"><i class="fa fa-check"></i><b>13</b> Regresión lineal</a>
<ul>
<li class="chapter" data-level="13.1" data-path="regresion-lineal.html"><a href="regresion-lineal.html#modelo-de-regresión-lineal-simple"><i class="fa fa-check"></i><b>13.1</b> Modelo de regresión lineal simple</a></li>
<li class="chapter" data-level="13.2" data-path="regresion-lineal.html"><a href="regresion-lineal.html#el-coeficiente-de-determinación-o-r2"><i class="fa fa-check"></i><b>13.2</b> El coeficiente de determinación o <span class="math inline">\(R^2\)</span></a></li>
<li class="chapter" data-level="13.3" data-path="regresion-lineal.html"><a href="regresion-lineal.html#transformaciones-de-variables"><i class="fa fa-check"></i><b>13.3</b> Transformaciones de variables</a></li>
<li class="chapter" data-level="13.4" data-path="regresion-lineal.html"><a href="regresion-lineal.html#tramificación-de-variables-en-modelos-lineales"><i class="fa fa-check"></i><b>13.4</b> Tramificación de variables en modelos lineales</a></li>
<li class="chapter" data-level="13.5" data-path="regresion-lineal.html"><a href="regresion-lineal.html#factores-en-modelos-de-regresión"><i class="fa fa-check"></i><b>13.5</b> Factores en modelos de regresión</a></li>
<li class="chapter" data-level="13.6" data-path="regresion-lineal.html"><a href="regresion-lineal.html#modelo-de-regresión-lineal-múltiple"><i class="fa fa-check"></i><b>13.6</b> Modelo de regresión lineal múltiple</a></li>
<li class="chapter" data-level="13.7" data-path="regresion-lineal.html"><a href="regresion-lineal.html#métodos-de-selección-de-variables"><i class="fa fa-check"></i><b>13.7</b> Métodos de selección de variables</a>
<ul>
<li class="chapter" data-level="13.7.1" data-path="regresion-lineal.html"><a href="regresion-lineal.html#método-fordward"><i class="fa fa-check"></i><b>13.7.1</b> Método fordward</a></li>
<li class="chapter" data-level="13.7.2" data-path="regresion-lineal.html"><a href="regresion-lineal.html#método-backward"><i class="fa fa-check"></i><b>13.7.2</b> Método backward</a></li>
<li class="chapter" data-level="13.7.3" data-path="regresion-lineal.html"><a href="regresion-lineal.html#método-stepwise"><i class="fa fa-check"></i><b>13.7.3</b> Método stepwise</a></li>
</ul></li>
<li class="chapter" data-level="13.8" data-path="regresion-lineal.html"><a href="regresion-lineal.html#el-principio-de-parsimonia"><i class="fa fa-check"></i><b>13.8</b> El principio de parsimonia</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="introduccion-diseno-experimentos.html"><a href="introduccion-diseno-experimentos.html"><i class="fa fa-check"></i><b>14</b> Introducción al diseño de experimentos</a>
<ul>
<li class="chapter" data-level="14.1" data-path="introduccion-diseno-experimentos.html"><a href="introduccion-diseno-experimentos.html#fundamentos-del-diseño-experimental"><i class="fa fa-check"></i><b>14.1</b> Fundamentos del diseño experimental</a></li>
<li class="chapter" data-level="14.2" data-path="introduccion-diseno-experimentos.html"><a href="introduccion-diseno-experimentos.html#fuentes-de-variabilidad"><i class="fa fa-check"></i><b>14.2</b> Fuentes de variabilidad</a></li>
<li class="chapter" data-level="14.3" data-path="introduccion-diseno-experimentos.html"><a href="introduccion-diseno-experimentos.html#planificación"><i class="fa fa-check"></i><b>14.3</b> Planificación</a></li>
<li class="chapter" data-level="14.4" data-path="introduccion-diseno-experimentos.html"><a href="introduccion-diseno-experimentos.html#bloquear-y-aleatorizar-factores"><i class="fa fa-check"></i><b>14.4</b> Bloquear y aleatorizar factores</a></li>
<li class="chapter" data-level="14.5" data-path="introduccion-diseno-experimentos.html"><a href="introduccion-diseno-experimentos.html#diseños-factoriales"><i class="fa fa-check"></i><b>14.5</b> Diseños factoriales</a>
<ul>
<li class="chapter" data-level="14.5.1" data-path="introduccion-diseno-experimentos.html"><a href="introduccion-diseno-experimentos.html#modelo-unifactorial.-ab-testing"><i class="fa fa-check"></i><b>14.5.1</b> Modelo unifactorial. A/B testing</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="introduccion-diseno-experimentos.html"><a href="introduccion-diseno-experimentos.html#modelos-bifactoriales.-interacciones-entre-variables"><i class="fa fa-check"></i><b>14.6</b> Modelos bifactoriales. Interacciones entre variables</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="modelos-GLM.html"><a href="modelos-GLM.html"><i class="fa fa-check"></i><b>15</b> Modelos GLM. Regresión logística y regresión de poisson</a>
<ul>
<li class="chapter" data-level="15.1" data-path="modelos-GLM.html"><a href="modelos-GLM.html#motivación-de-los-modelos-glm"><i class="fa fa-check"></i><b>15.1</b> Motivación de los modelos GLM</a></li>
<li class="chapter" data-level="15.2" data-path="modelos-GLM.html"><a href="modelos-GLM.html#la-función-de-enlace-en-los-modelos-glm"><i class="fa fa-check"></i><b>15.2</b> La función de enlace en los modelos GLM</a></li>
<li class="chapter" data-level="15.3" data-path="modelos-GLM.html"><a href="modelos-GLM.html#regresión-logística"><i class="fa fa-check"></i><b>15.3</b> Regresión logística</a></li>
<li class="chapter" data-level="15.4" data-path="modelos-GLM.html"><a href="modelos-GLM.html#regresión-de-poisson"><i class="fa fa-check"></i><b>15.4</b> Regresión de poisson</a></li>
<li class="chapter" data-level="15.5" data-path="modelos-GLM.html"><a href="modelos-GLM.html#los-glm-y-el-concepto-microsegmento"><i class="fa fa-check"></i><b>15.5</b> Los GLM y el concepto microsegmento</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="modelizacion-estadistica.html"><a href="modelizacion-estadistica.html"><i class="fa fa-check"></i><b>16</b> Modelización estadística. Conociendo los datos</a>
<ul>
<li class="chapter" data-level="16.1" data-path="modelizacion-estadistica.html"><a href="modelizacion-estadistica.html#establecer-un-método-para-la-modelización-estadística"><i class="fa fa-check"></i><b>16.1</b> Establecer un método para la modelización estadística</a></li>
<li class="chapter" data-level="16.2" data-path="modelizacion-estadistica.html"><a href="modelizacion-estadistica.html#un-método-de-modelización-estadística"><i class="fa fa-check"></i><b>16.2</b> Un método de modelización estadística</a></li>
<li class="chapter" data-level="16.3" data-path="modelizacion-estadistica.html"><a href="modelizacion-estadistica.html#conocimiento-de-los-datos"><i class="fa fa-check"></i><b>16.3</b> Conocimiento de los datos</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="modelizacion-estadistica.html"><a href="modelizacion-estadistica.html#muestreo.-datos-de-entrenamiento-datos-de-validación-datos-de-test-y-prueba-ciega."><i class="fa fa-check"></i><b>16.3.1</b> Muestreo. Datos de entrenamiento, datos de validación, datos de test y prueba ciega.</a></li>
<li class="chapter" data-level="16.3.2" data-path="modelizacion-estadistica.html"><a href="modelizacion-estadistica.html#aproximación-inicial-a-los-datos"><i class="fa fa-check"></i><b>16.3.2</b> Aproximación inicial a los datos</a></li>
<li class="chapter" data-level="16.3.3" data-path="modelizacion-estadistica.html"><a href="modelizacion-estadistica.html#clasificación-de-factores"><i class="fa fa-check"></i><b>16.3.3</b> Clasificación de factores</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="modelizacion-estadistica.html"><a href="modelizacion-estadistica.html#el-código-de-reclasificación-de-factores"><i class="fa fa-check"></i><b>16.4</b> El código de reclasificación de factores</a></li>
<li class="chapter" data-level="16.5" data-path="modelizacion-estadistica.html"><a href="modelizacion-estadistica.html#análisis-de-interacciones"><i class="fa fa-check"></i><b>16.5</b> Análisis de interacciones</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="modelizacion-estadistica-2.html"><a href="modelizacion-estadistica-2.html"><i class="fa fa-check"></i><b>17</b> Modelización estadística. Seleccionar variables y modelo</a>
<ul>
<li class="chapter" data-level="17.1" data-path="modelizacion-estadistica-2.html"><a href="modelizacion-estadistica-2.html#selección-de-variables"><i class="fa fa-check"></i><b>17.1</b> Selección de variables</a></li>
<li class="chapter" data-level="17.2" data-path="modelizacion-estadistica-2.html"><a href="modelizacion-estadistica-2.html#selección-del-modelo"><i class="fa fa-check"></i><b>17.2</b> Selección del modelo</a></li>
<li class="chapter" data-level="17.3" data-path="modelizacion-estadistica-2.html"><a href="modelizacion-estadistica-2.html#la-capacidad-predictiva-del-modelo"><i class="fa fa-check"></i><b>17.3</b> La capacidad predictiva del modelo</a></li>
<li class="chapter" data-level="17.4" data-path="modelizacion-estadistica-2.html"><a href="modelizacion-estadistica-2.html#resultados-finales"><i class="fa fa-check"></i><b>17.4</b> Resultados finales</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introducción a la Estadística para Científicos de Datos con R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="muestreo-inferencia" class="section level1 hasAnchor" number="12">
<h1><span class="header-section-number">Capítulo 12</span> Muestreo e inferencia estadística<a href="muestreo-inferencia.html#muestreo-inferencia" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>En el capítulo anterior dedicado al análisis bivariable se crearon visualizaciones sencillas para describir la posible relación entre dos variables, pero más allá de impresiones visuales no es posible asegurar que esa relación tiene validez estadística. Para establecer esa validez es necesario disponer de cierta dialéctica, de cierta base teórica básica para entender como se comporta un contraste estadístico o un intervalo de confianza. El científico de datos tiende a considerar que toda esa base teórica está obsoleta y que existe un cambio en el paradigma, pero los problemas a resolver con análisis estadísticos avanzados son similares a los que resuelve la estadística clásica. El trabajo del científico de datos en muchas ocasiones consiste en separar la señal del ruido, separar lo aleatorio de lo <strong>estadísticamente significativo</strong>. En los capítulos anteriores se han ido estableciendo los cimientos para realizar esta labor.</p>
<p>Todo problema y todo estudio parte de la <strong>población</strong>, en la RAE aparecen las siguientes definiciones de población:</p>
<ol style="list-style-type: decimal">
<li><ol start="6" style="list-style-type: lower-alpha">
<li>Acción y efecto de poblar.</li>
</ol></li>
<li><ol start="6" style="list-style-type: lower-alpha">
<li>Conjunto de personas que habitan en un determinado lugar.</li>
</ol></li>
<li><ol start="6" style="list-style-type: lower-alpha">
<li>Conjunto de edificios y espacios de una ciudad. Atravesó la población de una parte a otra.</li>
</ol></li>
<li><ol start="6" style="list-style-type: lower-alpha">
<li>Conjunto de individuos de la misma especie que ocupan determinada área geográfica.</li>
</ol></li>
<li><ol start="6" style="list-style-type: lower-alpha">
<li>Sociol. Conjunto de los elementos sometidos a una <strong>evaluación estadística mediante muestreo</strong>.</li>
</ol></li>
</ol>
<p>Desarrollando esta quinta acepción se tiene que la población es el conjunto de elementos sobre el que se estudia una característica y es necesario tener claro como se compone porque es la herramienta a disposición del científico de datos para resolver el problema que le plantean los datos. Esa población no tiene porque ser individuos, en el ejemplo de trabajo que sirve de hilo conductor se tiene una población de clientes de una compañía de seguros pero se pueden tener empresas, contratos, acciones deportivas,… Además, la población no tiene porque ser finita, de hecho para estudiar a la población será necesario obtener muestras mediante técnicas de muestreo.</p>
<div id="muestreo" class="section level2 hasAnchor" number="12.1">
<h2><span class="header-section-number">12.1</span> Muestreo<a href="muestreo-inferencia.html#muestreo" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Comprende las técnicas para la selección de elementos de una población. En ocasiones, por recursos o por definición no se dispone del total de población para realizar análisis. En esos casos se trata de obtener una muestra representativa de la población, una muestra que tendrá las mismas características de la población y ello permite <strong>inferir</strong> información acerca de una característica de la población.</p>
<p>Se distinguen dos grandes tipos de muestreo:</p>
<ul>
<li><p>Muestreo no probabilístico. Es un método de selección de elementos de la población donde el analista selecciona los elementos en base a su propia experiencia o necesidad. Ejemplos: seleccionar a clientes con una característica para realizar un análisis cualitativo.</p></li>
<li><p>Muestreo probabilístico. Cada elemento de la población tiene una probabilidad conocida a priori de ser seleccionado para el estudio.</p></li>
</ul>
<p>El científico de datos trabaja habitualmente con muestreo probabilístico y dentro de este tipo de muestreo existen diversas técnicas encaminadas a garantizar la <strong>representatividad</strong> de la muestra, garantizan que la selección de elementos tenga el rigor requerido para el análisis.</p>
<p>Para entender mejor como se comportan las distintas técnicas de muestreo se recomienda leer el siguiente enlace al <a href="http://anabelforte.com/2020/11/01/poblacion-y-muestra/" target="_blank">blog de Anabel Forte donde se tratan poblaciones y muestras</a>. Se considera que el científico de datos debe conocer los siguientes tipos de muestreo pero estas líneas son un atisbo sobre las posibilidades del muestreo estadístico, se pueden plantear diseños muy complejos.</p>
<div id="muestreo-aleatorio-simple" class="section level3 hasAnchor" number="12.1.1">
<h3><span class="header-section-number">12.1.1</span> Muestreo aleatorio simple<a href="muestreo-inferencia.html#muestreo-aleatorio-simple" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Todos los elementos son elegidos al azar entre toda la población porque todos ellos <strong>tienen la misma probabilidad de ser elegidos</strong>. Será la técnica que más utilice el científico de datos porque es habitual separar grupos de entrenamiento, grupos de test y grupos de validación cuando se realizan procesos de modelización. En R hay múltiples formas de realizar una muestra aleatoria mediante muestreo aleatorio simple, con <code>dplyr</code> se puede realizar del siguiente modo:</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="muestreo-inferencia.html#cb289-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb289-2"><a href="muestreo-inferencia.html#cb289-2" tabindex="-1"></a><span class="fu">library</span>(formattable)</span>
<span id="cb289-3"><a href="muestreo-inferencia.html#cb289-3" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span>
<span id="cb289-4"><a href="muestreo-inferencia.html#cb289-4" tabindex="-1"></a>train <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./data/train.csv&quot;</span>)</span>
<span id="cb289-5"><a href="muestreo-inferencia.html#cb289-5" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb289-6"><a href="muestreo-inferencia.html#cb289-6" tabindex="-1"></a>muestra_aleatoria1 <span class="ot">&lt;-</span> train <span class="sc">%&gt;%</span> <span class="fu">sample_n</span>(<span class="at">size =</span> <span class="dv">100</span>, <span class="at">replace =</span> F)</span></code></pre></div>
<p>Con la función <code>set.seed(10)</code> se fija la semilla ya que en realidad R genera números <em>pseudoaleatorios</em> y al fijar la semilla se obtiene siempre la misma muestra aleatoria lo que garantiza que los trabajos puedan ser reproducibles, en este caso con <code>sample_n</code> se obtiene una muestra de tamaño <code>size</code> observaciones y la opción <code>replace</code> indica si se hace con reemplazamiento de individuos o no. Si se quiere obtener una muestra que sea una proporción:</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="muestreo-inferencia.html#cb290-1" tabindex="-1"></a>muestra_aleatoria2 <span class="ot">&lt;-</span> train <span class="sc">%&gt;%</span> <span class="fu">sample_frac</span>(<span class="at">size =</span> <span class="fl">0.1</span>, <span class="at">replace =</span> F) </span></code></pre></div>
<p>En el ejemplo se obtiene una muestra aleatoria de un 10% de las observaciones mediante la instrucción <code>sample_frac</code>. Si el científico de datos desea dividir un data frame en dos partes es habitual el empleo de índices:</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="muestreo-inferencia.html#cb291-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb291-2"><a href="muestreo-inferencia.html#cb291-2" tabindex="-1"></a>selecccionar <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(train)) , <span class="fu">round</span>(<span class="fu">nrow</span>(train) <span class="sc">*</span> <span class="fl">0.70</span>))</span>
<span id="cb291-3"><a href="muestreo-inferencia.html#cb291-3" tabindex="-1"></a>datos_entrenamiento <span class="ot">&lt;-</span> train[selecccionar,]; </span>
<span id="cb291-4"><a href="muestreo-inferencia.html#cb291-4" tabindex="-1"></a>datos_test <span class="ot">&lt;-</span> train[<span class="sc">-</span>selecccionar,]; </span>
<span id="cb291-5"><a href="muestreo-inferencia.html#cb291-5" tabindex="-1"></a><span class="co"># % de datos de entrenamiento</span></span>
<span id="cb291-6"><a href="muestreo-inferencia.html#cb291-6" tabindex="-1"></a><span class="fu">nrow</span>(datos_entrenamiento)<span class="sc">/</span><span class="fu">nrow</span>(train)</span></code></pre></div>
<pre><code>## [1] 0.6999992</code></pre>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="muestreo-inferencia.html#cb293-1" tabindex="-1"></a><span class="co"># % de datos de test</span></span>
<span id="cb293-2"><a href="muestreo-inferencia.html#cb293-2" tabindex="-1"></a><span class="fu">nrow</span>(datos_test)<span class="sc">/</span><span class="fu">nrow</span>(train)</span></code></pre></div>
<pre><code>## [1] 0.3000008</code></pre>
<p>De ese modo se han dividido los datos de partida en dos data frames disjuntos donde <code>datos_entrenamiento</code> tiene el 70% de las observaciones y <code>datos_test</code> tiene el 30% de observaciones restantes del conjunto de datos de partida.</p>
</div>
<div id="muestreo-aleatorio-estratificado" class="section level3 hasAnchor" number="12.1.2">
<h3><span class="header-section-number">12.1.2</span> Muestreo aleatorio estratificado<a href="muestreo-inferencia.html#muestreo-aleatorio-estratificado" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Existe una población dividida en grupos homogéneos llamados estratos y se realiza un muestreo aleatorio dentro de cada uno de los estratos. Permite toma muestras de mayor tamaño donde así fuera necesario. El científico de datos empleará este tipo de técnica cuando tenga que <strong>balancear</strong> una muestra para un modelo (por ejemplo).</p>
<p>En el ejemplo de trabajo se pretende balancear la muestra para equilibrar al 50% aquellos clientes que están interesados y los que no están interesados en el seguro de automóviles. Habría dos formas de hacer esta tarea, aumentar el número de interesados o disminuir el número de no interesados, siempre artificialmente, para ilustrar la situación:</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="muestreo-inferencia.html#cb295-1" tabindex="-1"></a>no_interesados <span class="ot">&lt;-</span> <span class="fu">nrow</span>(train[train<span class="sc">$</span>Response<span class="sc">==</span><span class="dv">0</span>,])</span>
<span id="cb295-2"><a href="muestreo-inferencia.html#cb295-2" tabindex="-1"></a>interesados <span class="ot">&lt;-</span> <span class="fu">nrow</span>(train[train<span class="sc">$</span>Response<span class="sc">==</span><span class="dv">1</span>,])</span>
<span id="cb295-3"><a href="muestreo-inferencia.html#cb295-3" tabindex="-1"></a>muestra_interesados <span class="ot">&lt;-</span> train <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Response<span class="sc">==</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">sample_n</span>(no_interesados,<span class="at">replace =</span> T)</span>
<span id="cb295-4"><a href="muestreo-inferencia.html#cb295-4" tabindex="-1"></a>muestra_aumentada <span class="ot">&lt;-</span> train <span class="sc">%&gt;%</span>  <span class="fu">filter</span>(Response<span class="sc">==</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">bind_rows</span>(muestra_interesados)</span>
<span id="cb295-5"><a href="muestreo-inferencia.html#cb295-5" tabindex="-1"></a>muestra_disminuida <span class="ot">&lt;-</span> train <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Response<span class="sc">==</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb295-6"><a href="muestreo-inferencia.html#cb295-6" tabindex="-1"></a>  <span class="fu">bind_rows</span>(<span class="fu">sample_n</span>(train <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Response<span class="sc">==</span><span class="dv">0</span>), <span class="at">size=</span>interesados))</span></code></pre></div>
<p>Muestra con número de interesados incrementados artificialmente:</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="muestreo-inferencia.html#cb296-1" tabindex="-1"></a><span class="fu">formattable</span>(muestra_aumentada <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Response) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">conteo=</span><span class="fu">n</span>()))</span></code></pre></div>
<table class="table table-condensed">
<thead>
<tr>
<th style="text-align:right;">
Response
</th>
<th style="text-align:right;">
conteo
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
334399
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
334399
</td>
</tr>
</tbody>
</table>
<p>Muestra con número de interesados decrementados artificialmente:</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="muestreo-inferencia.html#cb297-1" tabindex="-1"></a><span class="fu">formattable</span>(muestra_disminuida <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Response) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">conteo=</span><span class="fu">n</span>()))</span></code></pre></div>
<table class="table table-condensed">
<thead>
<tr>
<th style="text-align:right;">
Response
</th>
<th style="text-align:right;">
conteo
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
46710
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
46710
</td>
</tr>
</tbody>
</table>
<p>En ambos casos la proporción es del 50%. Esta situación se la encontrará el científico de datos cuando tenga baja proporción de casos a investigar, por ejemplo, si únicamente un 1% de los clientes estuviera interesado, cualquier modelo estadístico con asegurar que nadie está interesado acertaría el 99% de las ocasiones, desde un punto de vista teórico sería un buen modelo. Mediante el balanceo de la muestra se procura, que el modelo detecte esos patrones capaces de discriminar para que, en la práctica, el modelo cumpla su función.</p>
<p>Estos ejemplos se ilustran con la librería <code>dplyr</code> pero se recomienda el uso de librerías específicas de muestreo como pueda ser <code>sampling</code>:</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="muestreo-inferencia.html#cb298-1" tabindex="-1"></a><span class="fu">library</span>(sampling)</span>
<span id="cb298-2"><a href="muestreo-inferencia.html#cb298-2" tabindex="-1"></a>muestra_balanceada <span class="ot">&lt;-</span> <span class="fu">strata</span>(train, <span class="at">stratanames =</span> <span class="st">&quot;Response&quot;</span>, <span class="at">size =</span> <span class="fu">c</span>(<span class="dv">10000</span>,<span class="dv">10000</span>))</span>
<span id="cb298-3"><a href="muestreo-inferencia.html#cb298-3" tabindex="-1"></a><span class="fu">formattable</span>(muestra_balanceada <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Response) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">conteo=</span><span class="fu">n</span>()))</span></code></pre></div>
<table class="table table-condensed">
<thead>
<tr>
<th style="text-align:right;">
Response
</th>
<th style="text-align:right;">
conteo
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10000
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10000
</td>
</tr>
</tbody>
</table>
</div>
<div id="muestreo-por-conglomerados" class="section level3 hasAnchor" number="12.1.3">
<h3><span class="header-section-number">12.1.3</span> Muestreo por conglomerados<a href="muestreo-inferencia.html#muestreo-por-conglomerados" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Supone seleccionar al azar todos los elementos de un grupo o un conglomerado, es un tipo de muestreo aleatorio donde se seleccionan todos los elementos de un conglomerado. Si el científico de datos selecciona un colegio, una calle, una provincia,… está realizando muestreo por conglomerados. En el ejemplo de trabajo se desean seleccionar 100 clientes de la provincia de Madrid y 100 clientes de la provincia de Barcelona.</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="muestreo-inferencia.html#cb299-1" tabindex="-1"></a>Barcelona <span class="ot">&lt;-</span> train <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Region_Code<span class="sc">==</span><span class="dv">8</span>) <span class="sc">%&gt;%</span> <span class="fu">sample_n</span>(<span class="dv">100</span>)</span>
<span id="cb299-2"><a href="muestreo-inferencia.html#cb299-2" tabindex="-1"></a>Madrid <span class="ot">&lt;-</span> train <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Region_Code<span class="sc">==</span><span class="dv">28</span>) <span class="sc">%&gt;%</span> <span class="fu">sample_n</span>(<span class="dv">100</span>)</span></code></pre></div>
<p>El científico de datos ha de saber que en el momento de realizar una selección de observaciones de cualquier tipo que está haciendo muestreo y por ello debe conocer y argumentar los motivos que le han llevado a realizar esa selección. Como se señaló con anterioridad estos apuntes son un mínimo, el muestreo abarca técnicas y modelos más complejos.</p>
</div>
</div>
<div id="inferencia-estadística" class="section level2 hasAnchor" number="12.2">
<h2><span class="header-section-number">12.2</span> Inferencia estadística<a href="muestreo-inferencia.html#inferencia-estadística" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Inferir significa extraer una conclusión a partir de hechos concretos a hechos generales. La inferencia estadística trata de extraer conclusiones sobre una característica, sobre un <strong>parámetro de la población</strong> a partir de una muestra de ésta. Los parámetros a analizar se denominan estadísticos muestrales, además si se conoce la distribución de dichos estadísticos (generalmente distribución normal) y se cumplen una serie de condiciones se trata de inferencia paramétrica. La estadística paramétrica clásica plantea tres tipos de problemas:</p>
<ul>
<li>Estimación puntual en la que se trata de dar un valor al parámetro a estimar (Ej: valor esperado de una media).</li>
<li>Estimación por intervalos (buscar un intervalo de confianza).</li>
<li>Contrastes de hipótesis donde se busca contrastar información acerca del parámetro.</li>
</ul>
<p>Se parte de un experimento, repetido varias veces y se obtiene una muestra con variables aleatorias independientes
idénticamente distribuidas y función de distribución conocida. Por ejemplo, se pretende estimar la altura media de los varones españoles, se recogen las alturas de 30 individuos y su media es de 1,74 metros. Esa es una estimación puntual. Entonces, cualquier función de la muestra de 30 varones que no dependan del parámetro a estimar es un <strong>estadístico muestra</strong> y esa media obtenida que nos sirve para conocer la altura media de los varones españoles es un <strong>estimador del parámetro</strong>. Ejemplos de estadísticos son el total muestra, la media muestral, la varianza muestral, la cuasivarianza muestral y los estadísticos de orden que habitualmente se representan con letras griegas.</p>
</div>
<div id="estimación-de-parámetros" class="section level2 hasAnchor" number="12.3">
<h2><span class="header-section-number">12.3</span> Estimación de parámetros<a href="muestreo-inferencia.html#estimación-de-parámetros" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Hay que determinar cual es el mejor estimador de un parámetro para una población a partir de una muestra. ¿Cuál será el estadístico muestral que mejor representa ese parámetro poblacional? El mejor estadístico será el más creíble, el más verosímil y por ello se denomina estimador de máxima verosimilitud pero tiene que cumplir una serie de condiciones:</p>
<ul>
<li><p>Será aquel que tiene menor sesgo. Esto se cumplirá cuando el promedio de las distintas estimaciones es análogo al parámetro poblacional.</p></li>
<li><p>Será el más eficiente. Cuando la desviación de las distintas estimaciones es la más baja, se minimiza la varianza de esas estimaciones.</p></li>
<li><p>Será el más consistente. Si la muestra crece también crece la probabilidad de que ese sea el estimador.</p></li>
<li><p>Será suficiente. Ningún estadístico calculado sobre la muestra va a proporcionar información adicional sobre su valor.</p></li>
</ul>
<p>A la hora de estimar el parámetro se plantea un dilema que el científico de datos deberá abordar en múltiples ocasiones, se trata del <strong>dilema sesgo - varianza</strong>.
<img src="imagenes/dilema_sesgo_varianza.png" /></p>
<p>Este dilema está presente siempre que se trabajan datos. Por ejemplo, aseverar que los inmigrantes cometen más delitos que los residentes de un país. Sin embargo, son más los hombres que cometen delitos que las mujeres. En ese caso la solución para vivir con mayor seguridad no sería una sociedad sin extranjeros, será una sociedad sin hombres. Para dar ambos datos se introduce sesgo, puede ser cierto que se acierte en mayor medida pero introduciendo condiciones que interesan al analista.</p>
<blockquote>
<p>El científico de datos se verá en esta situación, la mejor solución es argumentar, motivar y consensuar el sesgo con los usuarios de los datos.
En el ejemplo de trabajo las aproximaciones iniciales a los datos ya están planteando este dilema. Hay observaciones que deben ser eliminadas debido a que no aportan a la resolución del problema, mejorarán la estimación del número de respuestas positivas pero, ¿aportan algo al análisis?</p>
</blockquote>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="muestreo-inferencia.html#cb300-1" tabindex="-1"></a>bivariable <span class="ot">&lt;-</span> <span class="cf">function</span>(df, target, varib, <span class="at">ajuste=</span><span class="dv">1</span>){</span>
<span id="cb300-2"><a href="muestreo-inferencia.html#cb300-2" tabindex="-1"></a>  </span>
<span id="cb300-3"><a href="muestreo-inferencia.html#cb300-3" tabindex="-1"></a>target <span class="ot">=</span> <span class="fu">as.symbol</span>(target)</span>
<span id="cb300-4"><a href="muestreo-inferencia.html#cb300-4" tabindex="-1"></a>fr_analisis <span class="ot">=</span> <span class="fu">as.symbol</span>(varib)</span>
<span id="cb300-5"><a href="muestreo-inferencia.html#cb300-5" tabindex="-1"></a>g <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb300-6"><a href="muestreo-inferencia.html#cb300-6" tabindex="-1"></a>   <span class="fu">group_by</span>(<span class="at">factor_analisis =</span> <span class="fu">as.factor</span>(<span class="sc">!!</span>fr_analisis)) <span class="sc">%&gt;%</span></span>
<span id="cb300-7"><a href="muestreo-inferencia.html#cb300-7" tabindex="-1"></a>   <span class="fu">summarise</span>(<span class="at">pct_clientes =</span> <span class="fu">round</span>(<span class="fu">n</span>()<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fu">nrow</span>(df),<span class="dv">1</span>),</span>
<span id="cb300-8"><a href="muestreo-inferencia.html#cb300-8" tabindex="-1"></a>           <span class="at">pct_interesados =</span> <span class="fu">round</span>(<span class="fu">sum</span>(<span class="sc">!!</span>target)<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fu">n</span>(),<span class="dv">1</span>), <span class="at">.groups=</span><span class="st">&#39;drop&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb300-9"><a href="muestreo-inferencia.html#cb300-9" tabindex="-1"></a>   <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>factor_analisis)) <span class="sc">+</span></span>
<span id="cb300-10"><a href="muestreo-inferencia.html#cb300-10" tabindex="-1"></a>   <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y=</span>pct_interesados <span class="sc">*</span> ajuste), <span class="at">group=</span><span class="dv">1</span>, <span class="at">color=</span><span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb300-11"><a href="muestreo-inferencia.html#cb300-11" tabindex="-1"></a>   <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">y=</span>pct_clientes),<span class="at">fill=</span><span class="st">&quot;yellow&quot;</span>,<span class="at">alpha=</span><span class="fl">0.5</span>)  <span class="sc">+</span></span>
<span id="cb300-12"><a href="muestreo-inferencia.html#cb300-12" tabindex="-1"></a>   <span class="fu">geom_text</span>(<span class="at">size=</span><span class="dv">3</span>, <span class="fu">aes</span>(<span class="at">y=</span>pct_interesados <span class="sc">*</span> ajuste, <span class="at">label =</span> <span class="fu">paste</span>(pct_interesados,<span class="st">&#39; %&#39;</span>)), <span class="at">color=</span><span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb300-13"><a href="muestreo-inferencia.html#cb300-13" tabindex="-1"></a>   <span class="fu">scale_y_continuous</span>(<span class="at">sec.axis =</span> <span class="fu">sec_axis</span>(<span class="sc">~</span>.<span class="sc">/</span>ajuste, <span class="at">name=</span><span class="st">&quot;% interesados&quot;</span>), <span class="at">name=</span><span class="st">&#39;% clientes&#39;</span>) <span class="sc">+</span></span>
<span id="cb300-14"><a href="muestreo-inferencia.html#cb300-14" tabindex="-1"></a>   <span class="fu">theme_light</span>()</span>
<span id="cb300-15"><a href="muestreo-inferencia.html#cb300-15" tabindex="-1"></a> </span>
<span id="cb300-16"><a href="muestreo-inferencia.html#cb300-16" tabindex="-1"></a>g <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste0</span>(<span class="st">&quot;Análisis de la variable &quot;</span>,varib))</span>
<span id="cb300-17"><a href="muestreo-inferencia.html#cb300-17" tabindex="-1"></a>}</span>
<span id="cb300-18"><a href="muestreo-inferencia.html#cb300-18" tabindex="-1"></a><span class="fu">grid.arrange</span>(<span class="at">ncol=</span><span class="dv">2</span>,</span>
<span id="cb300-19"><a href="muestreo-inferencia.html#cb300-19" tabindex="-1"></a><span class="fu">bivariable</span>(train, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;Driving_License&#39;</span>, <span class="dv">1</span>),</span>
<span id="cb300-20"><a href="muestreo-inferencia.html#cb300-20" tabindex="-1"></a><span class="fu">bivariable</span>(train, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;Vehicle_Damage&#39;</span>, <span class="dv">1</span>),</span>
<span id="cb300-21"><a href="muestreo-inferencia.html#cb300-21" tabindex="-1"></a><span class="fu">bivariable</span>(train, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;Previously_Insured&#39;</span>, <span class="dv">1</span>))</span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-173-1.png" width="672" /></p>
<p>La estimación mejorará si se incluye la variable <code>Vehicle_Damage</code> y <code>Previously_Insured</code> porque los clientes sin cobertura de daños no van a contratar, igual que aquellos que ya han estado asegurados, no deben de ser reglas, <strong>deben ser condiciones</strong> a la hora de seleccionar clientes pero el analista debe tener claro, argumentar estas acciones y consensuar con los usuarios de los datos si son correctas las decisiones y los sesgos que está introduciendo en su análisis.</p>
</div>
<div id="intervalos-de-confianza" class="section level2 hasAnchor" number="12.4">
<h2><span class="header-section-number">12.4</span> Intervalos de confianza<a href="muestreo-inferencia.html#intervalos-de-confianza" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>El intervalo de confianza está presente en el lenguaje, si alguien pregunta sobre el precio de una vivienda no es posible dar un número, se da un mínimo y un máximo que recoja el mayor número de viviendas. El intervalo de confianza será un rango que recoja un x% de los posibles valores que toma una variable. Y su creación se sustenta en el <strong>Teorema central del límite</strong>. Éste dice, si se suman variables aleatorias, sin importar la distribución que éstas tienen, el resultado final será una variable con distribución normal si se cumplen ciertas condiciones:</p>
<ul>
<li>Las variables aleatorias tienen varianza finita</li>
<li>Hay un número elevado de variables aleatorias</li>
</ul>
<p>Para entenderlo mejor, se lanza al aire una moneda 100 veces y se anota el número de caras, se repite el experimento 10 veces:</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="muestreo-inferencia.html#cb301-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">11</span>)</span>
<span id="cb301-2"><a href="muestreo-inferencia.html#cb301-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(<span class="dv">10</span>,<span class="dv">100</span>,<span class="fl">0.5</span>)</span>
<span id="cb301-3"><a href="muestreo-inferencia.html#cb301-3" tabindex="-1"></a><span class="fu">hist</span>(x)</span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-174-1.png" width="672" /></p>
<p>Si ese mismo experimento se repite 1000 veces:</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="muestreo-inferencia.html#cb302-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(<span class="dv">1000</span>,<span class="dv">100</span>,<span class="fl">0.5</span>)</span>
<span id="cb302-2"><a href="muestreo-inferencia.html#cb302-2" tabindex="-1"></a><span class="fu">hist</span>(x)</span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-175-1.png" width="672" /></p>
<p>¿Qué forma empieza a tomar ese número de caras? Efectivamente, cuando hay un número elevado de variables la distribución empieza a asemejarse a una distribución normal. Desde una distribución binomial como es el lanzamiento de una moneda se ha llegado a una distribución normal. Llevando este teorema al ejemplo de trabajo:</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="muestreo-inferencia.html#cb303-1" tabindex="-1"></a>edad_40 <span class="ot">&lt;-</span> train <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Age<span class="sc">==</span><span class="dv">40</span>)</span>
<span id="cb303-2"><a href="muestreo-inferencia.html#cb303-2" tabindex="-1"></a>medias_muestras <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb303-3"><a href="muestreo-inferencia.html#cb303-3" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">500</span>)){</span>
<span id="cb303-4"><a href="muestreo-inferencia.html#cb303-4" tabindex="-1"></a>  muestra <span class="ot">&lt;-</span> edad_40 <span class="sc">%&gt;%</span> <span class="fu">sample_n</span>(<span class="dv">100</span>, <span class="at">replace =</span> T) </span>
<span id="cb303-5"><a href="muestreo-inferencia.html#cb303-5" tabindex="-1"></a>  medias_muestras <span class="ot">&lt;-</span> <span class="fu">rbind.data.frame</span>(medias_muestras, <span class="fu">mean</span>(muestra<span class="sc">$</span>Response))</span>
<span id="cb303-6"><a href="muestreo-inferencia.html#cb303-6" tabindex="-1"></a>}</span>
<span id="cb303-7"><a href="muestreo-inferencia.html#cb303-7" tabindex="-1"></a><span class="fu">names</span>(medias_muestras) <span class="ot">&lt;-</span> <span class="st">&quot;medias_response&quot;</span></span></code></pre></div>
<p>Se realizan 500 muestras con reemplazamiento de tamaño 100 clientes encuestados de 40 años de edad. Si se estudia la distribución de las medias de la variable respuesta en esas 500 muestras:</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="muestreo-inferencia.html#cb304-1" tabindex="-1"></a>medias_muestras <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>medias_response)) <span class="sc">+</span> <span class="fu">geom_density</span>()</span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-177-1.png" width="672" /></p>
<p>Recuerda a la distribución normal con sólo 100 observaciones seleccionadas en cada muestra, en el capítulo 10 se demostró mediante simulación que en espacio de 2 desviaciones estaban el 95% de los posibles valores:</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="muestreo-inferencia.html#cb305-1" tabindex="-1"></a>medias_muestras <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>medias_response)) <span class="sc">+</span> <span class="fu">geom_density</span>() <span class="sc">+</span></span>
<span id="cb305-2"><a href="muestreo-inferencia.html#cb305-2" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept=</span><span class="fu">mean</span>(medias_muestras<span class="sc">$</span>medias_response)<span class="sc">-</span><span class="fu">sd</span>(medias_muestras<span class="sc">$</span>medias_response)<span class="sc">*</span><span class="dv">2</span>, <span class="at">color =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb305-3"><a href="muestreo-inferencia.html#cb305-3" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept=</span><span class="fu">mean</span>(medias_muestras<span class="sc">$</span>medias_response)<span class="sc">+</span><span class="fu">sd</span>(medias_muestras<span class="sc">$</span>medias_response)<span class="sc">*</span><span class="dv">2</span>, <span class="at">color =</span> <span class="st">&#39;red&#39;</span>)</span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-178-1.png" width="672" /></p>
<p>El 95% de los posibles valores que va a tomar la media de la respuesta para los clientes de 40 años está dentro de ese intervalo (de confianza). Si se lleva este trabajo teórico al total de los grupos de edad para una confianza de 1 - <span class="math inline">\(\alpha\)</span> se produce un error que se define como:</p>
<p><span class="math display">\[Error = Z_{\frac{\alpha}{2}} \frac{\alpha}{\sqrt{n}}\]</span></p>
<p>De lo que se deduce que la media estará en un intervalo definido por ese error:</p>
<p><span class="math display">\[MED-ESTIMADA - Z_{\frac{\alpha}{2}} \frac{\alpha}{\sqrt{n}} &lt; MED-POBLACIONAL &lt; MED-ESTIMADA + Z_{\frac{\alpha}{2}} \frac{\alpha}{\sqrt{n}} \]</span></p>
<p>Para entenderlo mejor se programa con R el intervalo sobre la variable <code>Age</code> del conjunto de datos de trabajo paso a paso.</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="muestreo-inferencia.html#cb306-1" tabindex="-1"></a>resumen <span class="ot">&lt;-</span> train <span class="sc">%&gt;%</span></span>
<span id="cb306-2"><a href="muestreo-inferencia.html#cb306-2" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="at">factor_analisis =</span> Age) <span class="sc">%&gt;%</span></span>
<span id="cb306-3"><a href="muestreo-inferencia.html#cb306-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">porcen_clientes =</span> <span class="fu">round</span>(<span class="fu">n</span>()<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fu">nrow</span>(train),<span class="dv">1</span>),</span>
<span id="cb306-4"><a href="muestreo-inferencia.html#cb306-4" tabindex="-1"></a>            <span class="at">porcen_interesados =</span> <span class="fu">round</span>(<span class="fu">sum</span>(Response)<span class="sc">/</span><span class="fu">n</span>(),<span class="dv">3</span>),</span>
<span id="cb306-5"><a href="muestreo-inferencia.html#cb306-5" tabindex="-1"></a>            <span class="at">media_interesados =</span> <span class="fu">round</span>(<span class="fu">mean</span>(Response),<span class="dv">3</span>), </span>
<span id="cb306-6"><a href="muestreo-inferencia.html#cb306-6" tabindex="-1"></a>            <span class="at">z =</span> <span class="sc">-</span><span class="fu">qnorm</span>(<span class="fl">0.025</span>,<span class="dv">0</span>,<span class="dv">1</span>),</span>
<span id="cb306-7"><a href="muestreo-inferencia.html#cb306-7" tabindex="-1"></a>            <span class="at">desviacion =</span> <span class="fu">sd</span>(Response),</span>
<span id="cb306-8"><a href="muestreo-inferencia.html#cb306-8" tabindex="-1"></a>            <span class="at">n_grupo =</span> <span class="fu">n</span>())</span>
<span id="cb306-9"><a href="muestreo-inferencia.html#cb306-9" tabindex="-1"></a>resumen[(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>),]</span></code></pre></div>
<pre><code>## # A tibble: 10 x 7
##    factor_analisis porcen_clientes porcen_interesados media_interesados     z desviacion n_grupo
##              &lt;int&gt;           &lt;dbl&gt;              &lt;dbl&gt;             &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;   &lt;int&gt;
##  1              20             1.6              0.027             0.027  1.96      0.163    6232
##  2              21             4.3              0.035             0.035  1.96      0.183   16457
##  3              22             5.5              0.036             0.036  1.96      0.187   20964
##  4              23             6.4              0.037             0.037  1.96      0.188   24256
##  5              24             6.8              0.035             0.035  1.96      0.184   25960
##  6              25             5.4              0.036             0.036  1.96      0.185   20636
##  7              26             3.6              0.036             0.036  1.96      0.186   13535
##  8              27             2.8              0.044             0.044  1.96      0.205   10760
##  9              28             2.4              0.069             0.069  1.96      0.253    8974
## 10              29             1.9              0.102             0.102  1.96      0.302    7429</code></pre>
<p>Para cada grupo de edad se tiene el % de clientes, el % de interesados, que es igual que la media de interesados porque en variables de respuesta binomial la media es la proporción, y el cuantil de una normal que deja tanto a derecha como a izquierda un 2.5% de forma que se pueda crear un intervalo del confianza que contenga el 95% de los posibles valores, además, es necesaria la desviación típica y el número de clientes para cada grupo de edad. Se calculan los límites del intervalo y se realiza una gráfica con los intervalos de confianza:</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="muestreo-inferencia.html#cb308-1" tabindex="-1"></a>resumen <span class="ot">&lt;-</span> resumen <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">error_estimacion =</span> z <span class="sc">*</span> (desviacion<span class="sc">/</span><span class="fu">sqrt</span>(n_grupo)),</span>
<span id="cb308-2"><a href="muestreo-inferencia.html#cb308-2" tabindex="-1"></a>                              <span class="at">lim_inf=</span>media_interesados <span class="sc">-</span> error_estimacion,</span>
<span id="cb308-3"><a href="muestreo-inferencia.html#cb308-3" tabindex="-1"></a>                              <span class="at">lim_sup=</span>media_interesados <span class="sc">+</span> error_estimacion)</span>
<span id="cb308-4"><a href="muestreo-inferencia.html#cb308-4" tabindex="-1"></a>ajuste <span class="ot">=</span> <span class="dv">200000</span></span>
<span id="cb308-5"><a href="muestreo-inferencia.html#cb308-5" tabindex="-1"></a>g2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(resumen, <span class="fu">aes</span>(<span class="at">x=</span>factor_analisis)) <span class="sc">+</span></span>
<span id="cb308-6"><a href="muestreo-inferencia.html#cb308-6" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">y=</span>n_grupo),<span class="at">fill=</span><span class="st">&quot;yellow&quot;</span>,<span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb308-7"><a href="muestreo-inferencia.html#cb308-7" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y=</span>media_interesados <span class="sc">*</span> ajuste), <span class="at">group=</span><span class="dv">1</span>, <span class="at">color=</span><span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb308-8"><a href="muestreo-inferencia.html#cb308-8" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">sec.axis =</span> <span class="fu">sec_axis</span>(<span class="sc">~</span>.<span class="sc">/</span>ajuste), <span class="at">name=</span><span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb308-9"><a href="muestreo-inferencia.html#cb308-9" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin=</span>lim_inf<span class="sc">*</span>ajuste, <span class="at">ymax=</span>lim_sup<span class="sc">*</span>ajuste), <span class="at">linetype=</span><span class="dv">2</span>, <span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb308-10"><a href="muestreo-inferencia.html#cb308-10" tabindex="-1"></a>  <span class="fu">theme_light</span>() </span>
<span id="cb308-11"><a href="muestreo-inferencia.html#cb308-11" tabindex="-1"></a>g2 <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Análisis de la variable edad&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;% de clientes&quot;</span>) <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">&quot;Edad clientes&quot;</span>)  </span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-180-1.png" width="672" /></p>
<p>Se observa que grupos con gran número de observaciones crean intervalos muy estrechos y grupos de edad con pocas observaciones crean intervalos enormes, incluso con posibles valores negativos que no se pueden dar. En la fórmula de cálculo del intervalo se tiene <span class="math inline">\(\sqrt{n}\)</span>, la propia definición del intervalo está “ponderando” la definición del intervalo con el número de observaciones, además, una mayor desviación también hará incrementar el tamaño del intervalo.
Una de las funciones de los intervalos de confianza reside en la utilidad a la hora de agrupar factores, algo que se trató en el capítulo 11 donde se describió la importancia de crear estas agrupaciones, a modo ilustrativo:</p>
<p><img src="imagenes/Agrupacion_intervalos.png" /></p>
<p>El intervalo de confianza puede servir al científico de datos para agrupar los niveles de un factor. Hay que reseñar que en ggplot se puede emplear <code>geom_ribbon</code> sólo con variables numéricas si se emplean factores es necesario el uso de la función <code>geom_errorbar</code>:</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="muestreo-inferencia.html#cb309-1" tabindex="-1"></a>resumen <span class="ot">&lt;-</span> train <span class="sc">%&gt;%</span></span>
<span id="cb309-2"><a href="muestreo-inferencia.html#cb309-2" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="at">factor_analisis =</span> Gender) <span class="sc">%&gt;%</span></span>
<span id="cb309-3"><a href="muestreo-inferencia.html#cb309-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">porcen_clientes =</span> <span class="fu">round</span>(<span class="fu">n</span>()<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fu">nrow</span>(train),<span class="dv">1</span>),</span>
<span id="cb309-4"><a href="muestreo-inferencia.html#cb309-4" tabindex="-1"></a>            <span class="at">porcen_interesados =</span> <span class="fu">round</span>(<span class="fu">sum</span>(Response)<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fu">n</span>(),<span class="dv">1</span>),</span>
<span id="cb309-5"><a href="muestreo-inferencia.html#cb309-5" tabindex="-1"></a>            <span class="at">media_interesados =</span> <span class="fu">mean</span>(Response), </span>
<span id="cb309-6"><a href="muestreo-inferencia.html#cb309-6" tabindex="-1"></a>            <span class="at">z =</span> <span class="sc">-</span><span class="fu">qnorm</span>(<span class="fl">0.05</span>,<span class="dv">0</span>,<span class="dv">1</span>),</span>
<span id="cb309-7"><a href="muestreo-inferencia.html#cb309-7" tabindex="-1"></a>            <span class="at">desviacion =</span> <span class="fu">sd</span>(Response),</span>
<span id="cb309-8"><a href="muestreo-inferencia.html#cb309-8" tabindex="-1"></a>            <span class="at">n_grupo =</span> <span class="fu">n</span>(),</span>
<span id="cb309-9"><a href="muestreo-inferencia.html#cb309-9" tabindex="-1"></a>            <span class="at">error_estimacion =</span> z <span class="sc">*</span> (desviacion<span class="sc">/</span><span class="fu">sqrt</span>(n_grupo)),</span>
<span id="cb309-10"><a href="muestreo-inferencia.html#cb309-10" tabindex="-1"></a>                              <span class="at">lim_inf=</span>media_interesados <span class="sc">-</span> error_estimacion,</span>
<span id="cb309-11"><a href="muestreo-inferencia.html#cb309-11" tabindex="-1"></a>                              <span class="at">lim_sup=</span>media_interesados <span class="sc">+</span> error_estimacion)</span>
<span id="cb309-12"><a href="muestreo-inferencia.html#cb309-12" tabindex="-1"></a>ajuste <span class="ot">=</span> <span class="dv">1000000</span></span>
<span id="cb309-13"><a href="muestreo-inferencia.html#cb309-13" tabindex="-1"></a>g2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(resumen, <span class="fu">aes</span>(<span class="at">x=</span>factor_analisis)) <span class="sc">+</span></span>
<span id="cb309-14"><a href="muestreo-inferencia.html#cb309-14" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">y=</span>n_grupo),<span class="at">fill=</span><span class="st">&quot;yellow&quot;</span>,<span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb309-15"><a href="muestreo-inferencia.html#cb309-15" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y=</span>media_interesados <span class="sc">*</span> ajuste), <span class="at">group=</span><span class="dv">1</span>, <span class="at">color=</span><span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb309-16"><a href="muestreo-inferencia.html#cb309-16" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">sec.axis =</span> <span class="fu">sec_axis</span>(<span class="sc">~</span>.<span class="sc">/</span>ajuste), <span class="at">name=</span><span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb309-17"><a href="muestreo-inferencia.html#cb309-17" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin=</span>lim_inf<span class="sc">*</span> ajuste, <span class="at">ymax=</span>lim_sup<span class="sc">*</span> ajuste), <span class="at">width =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb309-18"><a href="muestreo-inferencia.html#cb309-18" tabindex="-1"></a>  <span class="fu">theme_light</span>() </span>
<span id="cb309-19"><a href="muestreo-inferencia.html#cb309-19" tabindex="-1"></a>g2 <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Análisis de la variable sexo&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;% de clientes&quot;</span>) <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">&quot;Género clientes&quot;</span>)  </span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-181-1.png" width="672" /></p>
<p>La estadística clásica es muy conservadora, se reitera que el intervalo es función de la raíz del tamaño del grupo, de este modo por sexo el intervalo es mínimo porque el tamaño de los grupos es de centenares de miles de clientes.</p>
</div>
<div id="contrastes-de-hipótesis" class="section level2 hasAnchor" number="12.5">
<h2><span class="header-section-number">12.5</span> Contrastes de hipótesis<a href="muestreo-inferencia.html#contrastes-de-hipótesis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Para realizar contrastes de hipótesis es necesario conocer 3 distribuciones artificiales asociadas a la distribución normal que no se trataron en capítulos anteriores.</p>
<p>La <strong>chi-cuadrado</strong> (<span class="math inline">\(\chi^2\)</span>) es una función similar a la gamma y se define como una suma de distribuciones normales al cuadrado, el número de distribuciones normales sumadas son los grados de libertad de la <span class="math inline">\(\chi^2\)</span></p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="muestreo-inferencia.html#cb310-1" tabindex="-1"></a>df1<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">x=</span><span class="fu">rchisq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10000</span>, <span class="at">df=</span><span class="dv">1</span>))</span>
<span id="cb310-2"><a href="muestreo-inferencia.html#cb310-2" tabindex="-1"></a>df1<span class="sc">$</span>grados_libertad <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb310-3"><a href="muestreo-inferencia.html#cb310-3" tabindex="-1"></a>df2<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">x=</span><span class="fu">rchisq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10000</span>, <span class="at">df=</span><span class="dv">2</span>))</span>
<span id="cb310-4"><a href="muestreo-inferencia.html#cb310-4" tabindex="-1"></a>df2<span class="sc">$</span>grados_libertad <span class="ot">=</span> <span class="dv">2</span></span>
<span id="cb310-5"><a href="muestreo-inferencia.html#cb310-5" tabindex="-1"></a>df3<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">x=</span><span class="fu">rchisq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10000</span>, <span class="at">df=</span><span class="dv">3</span>))</span>
<span id="cb310-6"><a href="muestreo-inferencia.html#cb310-6" tabindex="-1"></a>df3<span class="sc">$</span>grados_libertad <span class="ot">=</span> <span class="dv">3</span></span>
<span id="cb310-7"><a href="muestreo-inferencia.html#cb310-7" tabindex="-1"></a>df5<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">x=</span><span class="fu">rchisq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10000</span>, <span class="at">df=</span><span class="dv">5</span>))</span>
<span id="cb310-8"><a href="muestreo-inferencia.html#cb310-8" tabindex="-1"></a>df5<span class="sc">$</span>grados_libertad <span class="ot">=</span> <span class="dv">5</span></span>
<span id="cb310-9"><a href="muestreo-inferencia.html#cb310-9" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">rbind.data.frame</span>(df1, df2, df3, df5) <span class="sc">%&gt;%</span> </span>
<span id="cb310-10"><a href="muestreo-inferencia.html#cb310-10" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">grados_libertad=</span><span class="fu">as.factor</span>(grados_libertad))</span>
<span id="cb310-11"><a href="muestreo-inferencia.html#cb310-11" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">group=</span>grados_libertad, <span class="at">color=</span>grados_libertad, <span class="at">fill=</span>grados_libertad)) <span class="sc">+</span> </span>
<span id="cb310-12"><a href="muestreo-inferencia.html#cb310-12" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha=</span><span class="fl">0.3</span>)</span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-182-1.png" width="672" /></p>
<p>La <strong>t de Student</strong> se crea a partir de una normal (0,1) y una chi-cuadrado con n grados de libertad independientes. Una variable se distribuye bajo una t de Student si se puede definir como normal(0,1) dividido por la raíz cuadrada de una chi-cuadrado partida por sus grados de libertad.</p>
<p>La <strong>F de Snedecor</strong> se crea a partir de dos chi-cuadrado independientes divididas por sus respectivos grados de libertad, así la F de Snedecor tiene dos parámetros que indican sus grados de libertad.</p>
<p>¿Por qué es necesario conocer estas distribuciones? Porque los principales contrastes de hipótesis bajo unos supuestos poblacionales (habitualmente que se distribuyen normalmente) se distribuyen según estas distribuciones artificiales. Y al igual que en el intervalo de confianza hay una región, una zona en la que tendríamos una seguridad de no equivocarnos a la hora de establecer que un valor inferido esté en esa región.</p>
<blockquote>
<p>Se tienen muchos supuestos, distribuciones y <em>artificios estadísticos</em> que dependen en gran medida del tamaño de la población. El científico de datos pretende trabajar en un “entorno Big Data” y con modelos de aprendizaje automático donde todos estos aspectos teóricos no tienen cabida y están obsoletos. <strong>Pero todos estos conceptos y el método de trabajo es imprescindible</strong>.
El inicio de todo es la hipótesis, el pilar de una investigación, primero se establece y después se contrasta si es cierta o no. Se parte de una afirmación sobre un parámetro poblacional. ¿Es el parámetro <span class="math inline">\(\theta\)</span> un valor? Se establece la afirmación contraria <span class="math inline">\(\theta\)</span> no es ese valor.</p>
</blockquote>
<p>¿Un factor es independiente de otro? ¿Es independiente la respuesta positiva a la encuesta del género del cliente encuestado? Este es un <strong>contraste de independencia</strong> y se realiza mediante un test de la chi cuadrado.</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="muestreo-inferencia.html#cb311-1" tabindex="-1"></a><span class="fu">bivariable</span>(train, <span class="st">&#39;Response&#39;</span>, <span class="st">&#39;Gender&#39;</span>, <span class="dv">1</span>)</span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-183-1.png" width="672" /></p>
<p>Gráficamente parece que hay diferencia, pero no se sabe si esa diferencia estadísticamente significativa.</p>
<p>¿Hay diferencia de medias entre dos grupos? ¿Es distinta la media de la antigüedad para la respuesta de los encuestados? Este es un <strong>contraste de igualdad de medias</strong> que se realiza con la distribución t de student.</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="muestreo-inferencia.html#cb312-1" tabindex="-1"></a>train <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Vintage, <span class="at">group=</span><span class="fu">as.factor</span>(Response), <span class="at">fill=</span><span class="fu">as.factor</span>(Response))) <span class="sc">+</span> </span>
<span id="cb312-2"><a href="muestreo-inferencia.html#cb312-2" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>)</span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-184-1.png" width="672" /></p>
<p>¿Dos poblaciones tienen la misma varianza? ¿Tiene sentido un modelo de regresión? Estos contrastes se realizan mediante un test con la F de Snedecor, se verá en sucesivos capítulos su uso.</p>
<p>Hay infinidad de contrastes de hipótesis, en el <a href="https://bookdown.org/aquintela/EBE/contrastes-de-hipotesis.html">este link</a> quedan recogidos una gran parte y fundamentalmente como se clasifican:</p>
<p>En general el contraste de hipótesis es una cuestión del tipo <strong>¿Los datos de nuestras muestras respaldan las hipótesis de la población?</strong> y esa cuestión se resuelve del siguiente modo.</p>
<ul>
<li><p>Se parte de una hipótesis estadística (<span class="math inline">\(H_0\)</span>) que es una proposición acerca de una característica de la población de estudio. Si esa hipótesis se realiza sobre un parámetro es una hipótesis paramétrica. Habitualmente las <span class="math inline">\(H_0\)</span> se enuncian bajo el supuesto de que no hay efectos, por ejemplo, de que las muestras observadas pertenecen a las
poblaciones definidas en las Hipótesis Nulas, no hay diferencias estadísticas entre las muestras comparadas, correlaciones nulas,…</p></li>
<li><p>Se establece un criterio de precisión que podemos controlar a priori con la probabilidad de rechazar esa hipótesis.</p></li>
<li><p>Siempre hay dos hipótesis:</p>
<ul>
<li>Hipótesis de partida o nula (<span class="math inline">\(H_0\)</span>) que supone que el parámetro toma un valor determinado, se supone cierta y se rechazará si no es compatible con la evidencia de la muestra. Se controla a priori el error de rechazarla con el nivel de significación del contraste (p-valor).</li>
<li>Hipótesis alternativa (<span class="math inline">\(H_1\)</span>) se formula como la Ho no es cierta.</li>
</ul></li>
</ul>
<p>Evidentemente es posible errar a la hora de realizar el contraste de hipótesis, pero se trata de controlar ese error:</p>
<p><img src="imagenes/Contraste_hipotesis1.png" /></p>
<p>Se define Error de tipo I α como una probabilidad de rechazar <span class="math inline">\(H_0\)</span> siendo <span class="math inline">\(H_0\)</span> cierta. Probabilidad de, siendo inocente, dejar libre y se puede controlar. El error de tipo II es β y es una probabilidad de aceptar <span class="math inline">\(H_0\)</span> siendo <span class="math inline">\(H_0\)</span> falsa. Probabilidad de, no ser inocente y entrar en la cárcel. No se puede controlar, define la potencia del contraste de hipótesis = 1- β. Todos las aplicaciones estadísticas manejan el concepto p-valor que es una probabilidad fijada por el analista, define un <strong>umbral</strong>. El contraste de hipótesis sigue una distribución asociada a la normal y va a arrojar una probabilidad, si esa probabilidad está fuera de una región donde se rechaza la <span class="math inline">\(H_0\)</span> y que fija ese umbral <span class="math inline">\(\alpha\)</span> (habitualmente 0.05) entonces se podrá rechazar la <span class="math inline">\(H_0\)</span> bajo los supuestos establecidos. Como se vio en el capítulo 10 la función de densidad permite calcular probabilidades:</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="muestreo-inferencia.html#cb313-1" tabindex="-1"></a>aleatorio <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">dx =</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="at">mean=</span><span class="dv">0</span>, <span class="at">sd=</span><span class="dv">1</span>))</span>
<span id="cb313-2"><a href="muestreo-inferencia.html#cb313-2" tabindex="-1"></a>aleatorio <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(dx)) <span class="sc">+</span> <span class="fu">geom_density</span>() <span class="sc">+</span> </span>
<span id="cb313-3"><a href="muestreo-inferencia.html#cb313-3" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fl">1.96</span>, <span class="at">linetype=</span><span class="st">&quot;dashed&quot;</span>, <span class="at">color=</span><span class="st">&#39;grey&#39;</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb313-4"><a href="muestreo-inferencia.html#cb313-4" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">&#39;blue&#39;</span>) <span class="sc">+</span> </span>
<span id="cb313-5"><a href="muestreo-inferencia.html#cb313-5" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fl">2.4</span>, <span class="at">color =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span> </span>
<span id="cb313-6"><a href="muestreo-inferencia.html#cb313-6" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">x=</span><span class="dv">1</span>, <span class="at">y=</span><span class="fl">0.082</span>, <span class="at">label=</span> <span class="st">&quot;Región de aceptación&quot;</span>, <span class="at">color=</span><span class="st">&#39;blue&#39;</span>) <span class="sc">+</span> </span>
<span id="cb313-7"><a href="muestreo-inferencia.html#cb313-7" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">x=</span><span class="fl">2.5</span>, <span class="at">y=</span><span class="fl">0.060</span>, <span class="at">label=</span> <span class="st">&quot;Región de rechazo&quot;</span>, <span class="at">color=</span><span class="st">&#39;red&#39;</span>) </span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-185-1.png" width="672" /></p>
<p>Precisamente en función de esa región de rechazo se pueden clasificar los contrastes de hipótesis en:</p>
<ul>
<li>El contraste bilateral sitúa la región de rechazo en los dos extremos (colas) de la distribución muestral. Lanzar un dado y contrastar que la proporción de 3 es 1/6.</li>
<li>El contraste unilateral sitúa la región de rechazo en uno de los dos extremos (colas) de la distribución muestral. Lanzar el dado y contrastar si la proporción de 3 es &lt; 1/6.</li>
</ul>
<p>Además de la región de rechazo se pueden clasificar en función del conocimiento de la distribución de la población.</p>
<ul>
<li>Inferencia paramétrica, se conoce la distribución de la población y se cumplen todos los supuestos generales de la prueba de contraste.</li>
<li>Inferencia no paramétrica, no se conoce la distribución y no se cumplen los supuestos</li>
</ul>
<p>Retomando ejemplos anteriores, ¿es distinta la media de la antigüedad para la respuesta de los encuestados? Es necesario aplicar el test de la <span class="math inline">\(\chi^2\)</span></p>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="muestreo-inferencia.html#cb314-1" tabindex="-1"></a><span class="fu">chisq.test</span>(train<span class="sc">$</span>Response, train<span class="sc">$</span>Gender)</span></code></pre></div>
<pre><code>## 
##  Pearson&#39;s Chi-squared test with Yates&#39; continuity correction
## 
## data:  train$Response and train$Gender
## X-squared = 1047.7, df = 1, p-value &lt; 2.2e-16</code></pre>
<p>Como se indicó con anterioridad, el contraste suele partir desde la situación de igualdad, <span class="math inline">\(H_0\)</span>: Hay independencia, la respuesta al cuestionario no depende del sexo. <span class="math inline">\(H_1\)</span>: Hay dependencia, la respuesta depende del sexo. Este contraste arroja un p-valor de 0.0000 … la probabilidad es ínfima, se sitúa dentro de esa región de rechazo. De este modo, fijado un umbral de 0.05 se rechaza la <span class="math inline">\(H_0\)</span> y se rechaza que hay independencia, la respuesta depende del sexo del encuestado. Recordando el análisis bivariable con los intervalos de confianza anterior:</p>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-187-1.png" width="672" /></p>
<p>Se aprecia que el intervalo de la proporción de respuestas positivas (de la media) no incluyen la media del otro grupo. Estos dos análisis están ligados. Reduciendo el número de observaciones artificialmente pueden variar los resultados.</p>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-188-1.png" width="672" /></p>
<p>Se aprecia que las proporciones de ambos sexos están dentro del intervalo, el test de la <span class="math inline">\(\chi^2\)</span> queda:</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="muestreo-inferencia.html#cb316-1" tabindex="-1"></a><span class="fu">chisq.test</span>(muestra<span class="sc">$</span>Response, muestra<span class="sc">$</span>Gender)</span></code></pre></div>
<pre><code>## 
##  Pearson&#39;s Chi-squared test with Yates&#39; continuity correction
## 
## data:  muestra$Response and muestra$Gender
## X-squared = 0.022353, df = 1, p-value = 0.8812</code></pre>
<p>En este caso se obtiene un p-valor superior a ese umbral habitual de 0.05 se está situando en la región de aceptación de la <span class="math inline">\(H_0\)</span> por lo que la respuesta no depende del sexo del encuestado. Estos ejemplos están forzados pero es importante que el científico de datos no saque conclusiones erróneas en proporciones pequeñas, un modelo de aprendizaje automático no es tan sensible a esta situación y puede ser más difícil controlarla.</p>
<p>Por otro lado, ¿es distinta la media de la antigüedad para la respuesta de los encuestados? En el capítulo anterior se vio este gráfico.</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="muestreo-inferencia.html#cb318-1" tabindex="-1"></a>train <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Vintage, <span class="at">group=</span><span class="fu">as.factor</span>(Response), <span class="at">fill=</span><span class="fu">as.factor</span>(Response))) <span class="sc">+</span> </span>
<span id="cb318-2"><a href="muestreo-inferencia.html#cb318-2" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>)</span></code></pre></div>
<p><img src="estadistica-data-scientist_files/figure-html/unnamed-chunk-190-1.png" width="672" /></p>
<p>Visualmente no se aprecian diferentes medias pero ese resultado no tiene ninguna validez estadística.</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="muestreo-inferencia.html#cb319-1" tabindex="-1"></a><span class="fu">t.test</span>(<span class="at">x =</span> train[train<span class="sc">$</span>Response<span class="sc">==</span><span class="dv">1</span>,]<span class="sc">$</span>Vintage,</span>
<span id="cb319-2"><a href="muestreo-inferencia.html#cb319-2" tabindex="-1"></a>       <span class="at">y =</span> train[train<span class="sc">$</span>Response<span class="sc">==</span><span class="dv">0</span>,]<span class="sc">$</span>Vintage,</span>
<span id="cb319-3"><a href="muestreo-inferencia.html#cb319-3" tabindex="-1"></a>  <span class="at">alternative =</span> <span class="st">&quot;two.sided&quot;</span>, <span class="at">mu =</span> <span class="dv">0</span>,</span>
<span id="cb319-4"><a href="muestreo-inferencia.html#cb319-4" tabindex="-1"></a>  <span class="at">var.equal   =</span> <span class="cn">TRUE</span>, <span class="at">conf.level  =</span> <span class="fl">0.95</span>)</span></code></pre></div>
<pre><code>## 
##  Two Sample t-test
## 
## data:  train[train$Response == 1, ]$Vintage and train[train$Response == 0, ]$Vintage
## t = -0.64844, df = 381107, p-value = 0.5167
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  -1.0780507  0.5420556
## sample estimates:
## mean of x mean of y 
##  154.1122  154.3802</code></pre>
<p>En este caso la <span class="math inline">\(H_0\)</span> en condiciones de igualdad es la media de la antigüedad de los clientes que responden positivamente a la encuesta es igual a la media de la antigüedad de los clientes que responden negativamente y la <span class="math inline">\(H_1\)</span> la contraria. El contraste tiene una probabilidad de 0.5 por lo que fijado un umbral de 0.05 este está muy por debajo así que no es posible rechazar la hipótesis nula, con estos datos la antigüedad como cliente no está influyendo en la respuesta al cuestionario. De hecho, se ha pedido el intervalo de confianza y se observa que el 0 estaría dentro de ese intervalo. También cabe reseñar que el contraste de diferencia de medias requiere una gran cantidad de supuestos, además el t-test está muy influido por el número de observaciones.</p>
<p>Al igual que sucedía con el muestreo no es necesario que el científico de datos conozca todos los tipos de contrastes y de supuestos necesarios para llevar a cabo el contraste, pero ha de saber plantear una hipótesis, definir correctamente esa hipótesis, determinar que registros se emplean para contrastar esa hipótesis y como han de estar dispuestos esos registros para poder realizar el contraste.</p>
<blockquote>
<p>No se trata de resolver un problema mediante estadística clásica, se trata de que el científico de datos tenga esa dialéctica estadística que le va a permitir mejorar en sus procesos de modelización.</p>
</blockquote>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="analisis-bivariable.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="regresion-lineal.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rvaquerizo02/edit/master/11-muestreo-inferencia.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
